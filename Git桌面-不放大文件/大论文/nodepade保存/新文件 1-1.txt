### 优化后的表达

在纵向联邦学习框架中，为有效利用对齐样本的特征信息并量化跨参与方特征间的统计关联性，本节提出了一种基于隐私保护的Spearman秩相关分析方法，以构建跨方特征相关性排序体系。设协调方C作为可信第三方，负责生成同态加密密钥对\(\{\text{pk}, \text{sk}\}\)，并将公钥\(\text{pk}\)分发至Party A和Party B。以下为计算流程的优化表达，旨在提升学术论文的科学性、正确性和严谨性：

#### **定义1：特征列秩向量**
令\(\mathcal{F}^A = \{f^A_1, \ldots, f^A_{m_A}\}\)表示Party A在对齐样本集\(\mathcal{D}^A_{al}\)上的特征空间，其中\(m_A\)为Party A的特征维数，\(f^A_p \in \mathbb{R}^{n_{al}}\)为第\(p\)个特征的观测向量（\(p = 1, \ldots, m_A\)），\(n_{al}\)为对齐样本量。同理，\(\mathcal{F}^B = \{f^B_1, \ldots, f^B_{m_B}\}\)表示Party B的特征空间，\(m_B\)为Party B的特征维数，\(f^B_q \in \mathbb{R}^{n_{al}}\)为第\(q\)个特征的观测向量（\(q = 1, \ldots, m_B\)）。对于任意特征列\(f^A_p\)，计算其秩向量\(R^A_p = [r^A_{p1}, \ldots, r^A_{pn_{al}}]\)，其中\(r^A_{pi}\)（\(i = 1, \ldots, n_{al}\)）为第\(i\)个观测值在\(f^A_p\)中的秩次，采用平均秩方法处理同值情况。Party B的特征列\(f^B_q\)的秩向量\(R^B_q = [r^B_{q1}, \ldots, r^B_{qn_{al}}]\)以相同方式计算。

#### **步骤1：加密秩向量传输**
Party A使用公钥\(\text{pk}\)对每一秩向量\(R^A_p\)进行同态加密，生成加密秩向量\([R^A_p] = [\text{Enc}(r^A_{p1}), \ldots, \text{Enc}(r^A_{pn_{al}})]\)，并将其发送至Party B。类似地，Party B计算其秩向量\(R^B_q\)，并根据后续计算需要，利用\(\text{pk}\)加密负秩值，生成\([-R^B_q] = [\text{Enc}(-r^B_{q1}), \ldots, \text{Enc}(-r^B_{qn_{al}})]\)。这一步骤确保所有秩信息在跨方传输和计算中得以隐私保护。

#### **步骤2：加密秩差计算**
对于特征对\((f^A_p, f^B_q)\)，Party B利用同态加密的加法性质，计算加密秩差向量\([D_{pq}]\)。具体地，对于每个\(i = 1, \ldots, n_{al}\)，计算：
\[
\text{Enc}(r^A_{pi} - r^B_{qi}) = \text{Enc}(r^A_{pi}) + \text{Enc}(-r^B_{qi})
\]
从而生成：
\[
[D_{pq}] = [\text{Enc}(r^A_{p1} - r^B_{q1}), \ldots, \text{Enc}(r^A_{pn_{al}} - r^B_{qn_{al}})]
\]
此过程利用了同态加密支持密文间的加法运算，Party B无需解密即可完成秩差计算，保证了数据隐私性。

#### **步骤3：Spearman相关系数计算**
协调方C接收所有\([D_{pq}]\)，使用私钥\(\text{sk}\)解密，得到秩差\(d_{pq}^i = r^A_{pi} - r^B_{qi}\)。随后，基于Spearman秩相关系数的标准公式，计算特征对\((f^A_p, f^B_q)\)的相关性：
\[
\rho_{pq} = 1 - \frac{6 \sum_{i=1}^{n_{al}} (d_{pq}^i)^2}{n_{al}(n_{al}^2 - 1)}
\]
其中，\(\rho_{pq}\)衡量了两特征间的单调关系强度。通过对所有特征对\((p, q)\)重复此计算，构建跨方相关性矩阵\(\mathbf{M} \in \mathbb{R}^{m_A \times m_B}\)，其元素\(\mathbf{M}(p, q) = \rho_{pq}\)。

#### **定义2：特征关联强度**
对于Party B的每个特征\(f^B_q\)，定义其与Party A特征空间的平均关联强度：
\[
\mu_q = \frac{1}{m_A} \sum_{p=1}^{m_A} \rho_{pq}, \quad q = 1, \ldots, m_B
\]
\(\mu_q\)量化了\(f^B_q\)对Party A特征集\(\mathcal{F}^A\)的综合依赖程度，反映了该特征从对方特征空间中可获得的潜在信息增益。

#### **步骤4：生成特征排序列表**
基于\(\mu_q\)，构造Party B的特征重要性序列\(\mathcal{L}_B = \{(\mu_q, f^B_q)\}_{q=1}^{m_B}\)，并按\(\mu_q\)降序排列，得到排序列表\(\mathcal{L}_B^{\text{sorted}}\)。该列表反映了Party B特征与Party A特征的相关性强弱顺序，将指导后续非对齐样本特征生成过程，优先利用联邦半监督方法补全关联性强的特征维度。

#### **方法优势与意义**
该方法通过同态加密保护秩向量运算，避免了原始特征分布的直接暴露，仅由可信协调方C解密必要统计量，保障了跨方计算的隐私性。基于Spearman秩相关性量化特征间的统计依赖关系，识别出跨方特征的依赖模式，为非对齐样本的异构数据补全提供了科学的依据。排序机制有效筛选出与对方特征信息增益最大的维度，优先生成这些特征，从而提升纵向联邦学习的效率和性能。

---

优化后的表达在保持原文技术内容完整性的基础上，增强了逻辑清晰度与学术严谨性，明确了各步骤的计算细节及隐私保护机制，同时规范了数学符号和术语表述，使其更符合学术论文的标准。