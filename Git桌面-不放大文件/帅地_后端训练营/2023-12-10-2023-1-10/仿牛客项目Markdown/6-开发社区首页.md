6-开发社区首页.mp4

说话人1 00:03
经过这几次课的学习，大家已经了解了spring还有spring mvc my bet is他们的基本的使用方式，那么这节课我们把它们综合到一起，开发出我们项目中的第一个功能，社区首页的功能。那么在开发这个功能之前，我想先再给大家梳理一下咱们开发的步骤或者说开发的流程。


因为我们做的是web项目，而web项目主要解决的是浏览器和服务器之间的一个交互的问题。


那么之前我们聊过 HTTP协议，大家也知道浏览器和服务器之间是由一次一次的请求进行交互的，所以说我们任何功能都可以拆解成若干次请求，那么你只要掌握了每一次请求的执行的过程，然后按照这个步骤去开发每一次请求，基本上这个项目就能够逐渐的把它完善起来，那么之前我们也说过每次请求，那么它的执行过程是这样的，请求会提交给我们服务器的，那么视图层主要有CTRL还有模板所构成，然后 CTRL在处理请求的过程当中，它需要访问业务层，然后让业务组件来处理具体的业务，那么业务组件在处理业务的过程中会访问这个数据库，所以说它会调用数据访问组件，当然数据访问组件就是和数据库打交道了，所以说请求的执行过程就是这样一个顺序，那么很显然 service它依赖于到对不对？


然后 CTRL是依赖于service，我们开发的时候，如果是先开发到再开发service再开发controller，可能会比较舒服一点，按照他们依赖的顺序去开发比较舒服一点。


好，所以说我们后面的各开发各个功能当中，我都会按照这样的一个既定的顺序进行开发。


然后我们在实际开发的时候，可能对于一个新手来说，我们没有这方面的经验，我们可能一开始开发会有一点困难，你最好可以把一个功能给它做一个拆解，比如说第一步先实现一个什么样的效果，第二步我再完善一下。


然后的话其实很多这个程序它并不是说一步到位就开发好的，往往就是在不断的优化不断的完善的过程中，最终才把整个功能实现的。


那么对于社区首页，其实它就是一个帖子列表，查询帖子的功能，我们可以把这个功能拆解为两步，第一步我们可以先显示前10个帖子，因为那个表里有很多个数据，不止10个，我们先显示第一页10个，然后这一步完成以后，我们在此基础上再做完善，下一步我们把分页的组件开发好，然后可以分页显示每一页的帖子可以有一下一页或者点击某一页的这样的功能。


接下来我就给大家演示社区首页它的开发的方式。好这样，因为我们要先开发数据访问层，所以说我们先把表建好，并且把它讲解一下。


当然之前我们已经把这个表建好了，那么帖子表是这张表叫discard post讨论帖，然后表的结构我给大家看一下，你可以点 I然后点ddl就是建表的ddl语句，通过这个语句你就能够了解这个表的包含哪些字段，每个字段的它的一些含义。


然后你看第一个字的ID自增长的主见没什么好说的。第二个字到底是user ID，就是这个帖是由哪个用户发布的，那么我们记录了一下用户的ID，显然字段它可以关联 user表。


然后第三个字段，第四个字段分别是帖子的标题和帖子的内容很好理解，然后因为内容会比较长，所以说它是一个文本一个大文本，而不是一个普通的外插。


然后是帖子类型这里有解释，这个零一表示置顶的帖子，status是这个帖子的状态，零表示正常的状态，一表示它是精华帖，二表示他被拉黑了，然后create time是帖子发布的时间， comment count是这个帖子的评论的数量，实际上我们有单独的评论表，comment它和这个帖子是有关联关系的，所以说其实我们通过查询 com的表是可以查到这个帖子有多少个评论的，但是因为我们每一个帖子都要显示评论的数量，这个行为比较频繁，因此我们在这个表里冗余的存了一下评论数量，这样我们取这个值的时候就不用去关联查，效率会高一点，所以这是冗余的存储这么一个字段。


最后一个字段是score是帖子的分数用来将来给帖子做排名用的，按照它的热度进行排名，我们需要算一个分，这个是比较靠后的位置，我们再去演示这样的功能。


这次课我们先用不上，好了，那么这个表我就介绍完了，目前我们这个表里已经有了一些测试数据给你看一下，有了很多数据，当然这个数据是我硬造的，所以说很多数据它是一样的，但是只要有数据，我们查的时候能把分页显示出来，效果能够表现出来就可以了。


好，这个表介绍完了，介绍完以后，我们首先要开发的是 dao数据访问层，那么开发数据访问层首先我们要把实体类写好，用来能够封装表里的数据对不对？然后接下来我们再去开发数据访问组件，也就是迈克尔。


好，下面我们就来写实体类，我打开我的开发工具 idea，然后在安贴报价再新建一个类，那么根据这个表名我给它取个名，叫做discus post采用头风式的命名办法。


好，然后根据刚才我们看到的那些字段，我给它加上与之对应的属性写错了，首先是一个整数ID，其次也是一个整合用户的ID，user ID好，然后是一个字符串开头，就是帖子的标题，接下来还是字符串，content就是帖子的内容。


好，再往下是帖子的类型是一个整数，tap，那么零表示普通一点的置顶，接下来是帖子的状态也是一个整数，然后零是正常，一是精华，二是拉黑，再来是帖子创建的这个日期 create time。然后是冗余的字段，存的是评论的数量，评论我们就要comment，然后数量count。最后是记录一个帖子的分数，那么我这里用的是一个小数杠。


好了，我们这个帖子表的字段一共这么多个字段，那么接下来我给这些字段生成 get on the set全选，然后为了测试打印数据方便，我再给它生成这个to c并。好，实体类非常容易，它没有什么具体的逻辑，反正表里有什么字段你就建什么属性就完了。


有了这个试题了以后，下面我们就可以开发 Map，那么我们通常就是一张表一个map，所以我需要给这张表创建一个新的map是一个接口，那么取名可以叫discus POS map，然后别忘了在 map之上打一个注解，叫map你打上注解以后才能够被容器扫描，接口才能够自动的去实现它，才能够装配它。


然后我们是要做查询的功能，所以说我们需要在这里声明查询的方法，然后在配置文件里写出它与之有关的circle。然后我之前说了我们做的是分页查询帖子的功能，所以说你查到的肯定是多条数据，因此返回的应该是一个集合，然后集合里装的就是帖子的对象。Discuss post。然后这个方法名你随便取，我习惯于叫select discourse。Post。


加个s表示复数，然后这里面我给他来一些参数，然后我再解释一下，首先我加一个优质ID，因为刚才你也看到了帖子，表里是有一个字段，是uzid的，当然了我们首页上查询的时候其实是不用传入u站ID的，就是把所有人的所有帖子都查到 U站ID是给哪用，将来我们会开发用户的个人主页的功能，个人主页里有一个我发布过的帖子这么一个功能，我发布的帖子其实就可以调这个方法，然后传入用户的ID，因此这个方法我是考虑到了将来的功能的适用的程度，因此才加了字段。


那么在首页上我们查询的时候，不会传出这个值怎么办？或者说你不会传出这个值，它就默认就是0，因此当uzid等于0的时候，我们就不管它，或者说我们就不把这个条件拼到 Circle里，然后当优质ID不是0，它是一个正常的值，比如说它是等于一二100这都可以，那么我们就需要把它拼到 circle里。


所以这个方法我们在实现的时候， circle它是一个动态的circle，有时要拼uzid有时不要拼。如何实现动态circle，咱们一会儿写 Circle的时候你就知道了。


好，那么还有虽然说我们第一步在页面展现上先不去管分页，但是我们在开发这个方法的时候，也要考虑到让这个方法能够支持未来分页的可能，所以说我得把分页的情形考虑进去，一步到位就把 map写好。


分页的话咱们用的是my circle，数据库它的分页非常简单，我们加一个limit，然后在里面的关键字的后面跟着两个参数，一个是我这一页的起始行的行号这么一个参数，第二个是这一页最多显示多少条数据，所以需要两个条件，我就把这两个条件也加到这个方法里。


好，那么这个off site每一页起始行的行号，然后 limit指的是每一页最多显示多少条数据，那么我们拼SQL的时候，那么把这两个条件拼到分页的关键字里面的，后面就可以了，然后我们因为页面上最终要支持分页，而分页的时候你要知道我一共可能有多少页，一共有可能有多少页，它是通过计算而来的，需要两个条件，第一个就是你一共有多少条数据，第二个你每页显示多少条数据，两者一除就可以了。


那么每页显示多少条数据，其实我们是可以固化下来，比如10条20条可以固化下来，那么一共有多少条数据，这得看表里的数据。


所以说为了我们将来显示页码它的方便，所以我们还需要提供一个方法，就是要查询出这个表里一共有多少条数据，我把这个方法也声明一下，那么它返回整数就可以了。然后方法名我叫select discourse。


Post rose查询帖子的行数，然后也需要加一个参数user ID，那么在首页上我们不会传入user ID，那就是0，当它等于0的时候我就不拼这个条件，当我们开发个人主页，我的帖子的时候就会拼这个条件，它也是一个动态的缺口。然后这里边我还要多说一句，我们在写这个方法的时候还可以说，其实在写其他的方法的时候也是我们在可以在参数之前加上这么一个注解派入，注解的作用是用来给参数取一个别名，比如说有的参数比较长，你嫌频道SQL里面写的时候麻烦你可以用parry给它取一个别名，就像这样写，当然我这里别名和参数名一致的，这也没关系。


然后这里我一定要写上 prm是为什么？如果说我们在circle里需要用到动态的条件，并且这个条件里需要用到这个参数，而恰巧这个方法只有一个参数，这个时候这个参数之前是一定要去辨别的，否则它会报错。


好，我再给大家再总结一下，就是说如果说我需要动态的拼一个条件，并且这个方法有且只有这一个条件，这个时候这个参数之前就必须取别名，你像刚才这个方法它有三个参数，你不取平面也无所谓，所以说细节大家注意，这里我写个注释给大家做个提醒，就是说他说注解它是用于给参数取别名的，其次如果这个方法只有一一个参数，并且在动态社保是用if标签来拼的，并且在if里使用，那么就必须加别名，也就是说你必须得用parry。


好了，那么我们首页的查询功能用这两个方法就够了，那么将来我们增加帖子等等对帖子做其他的操作的时候，我们再去补充其他的方法。好，那么说明了这两个方法以后，下面我们就可以实现这两个方法还是比较容易的。


我需要给 Map再新建一个配置文件放到 map目录下，好新建一个配置文件，这个配置文件我取名叫做discuss poste，map点xml，那么它的结构我们之前因为有了user Micro，你可以从user map里复制，主要是这段，因为这段没法记，把它copy一下，然后粘贴过来，当然你别忘了把麦克还得给它结个尾，然后你需要改变一下这个类名。


当前我们用的是discus post map，声明完以后表示说配置文件是为接口服务的，不会有偏差，然后我们需要是做两个查询，而查询的话我们像上次课一样，我们也要把查询语句，查询的字段给它提取出来，然后公用一下，所以我先声明一个公用的circle，它的ID然后取名叫做select feels，然后把我们要查询的字段在这列举一下，一个是ID，然后是牛仔的字段，所以说中间是下划线和数据库去比较开头，然后是 content。


Type。Status。Create。Time。Comment。Count。好，那么写这样的代码的时候一定要注意，如果说你单词写错了，它是不会有提示的，所以说你最好仔细一点。


好，写完以后，下面我就开始实现我们刚才的第一个方法，这个方法把它copy一下，因为我在写circle的时候需要指定它的对应关系，利用方法名，那么我是给这个方法写circle，那么这个方法它返回的是集合里装的是 discuss post。


那么你注意我们需要声明返回的类型，因为它返回的类型不是查自带的类型，那么他默认他不知道，你要告诉他，然后它是一个集合里装的是discourse post，那么这种情况你只需要声明这个类型就可以了，历史的你不用声明，因为历史的它能检测到，而是Java自带的类型，它能够解析出来这个含义，你要声明好好，那么我们返回值的类型需要通过result进行声明，然后写上这个discourse post。


好，接下来我们就来写查询的语句也非常的方便，我要查什么？查的是这些字段。那么用include把它引用到这里，然后 Frown的是discourse，post这张表，然后再加一些条件加什么条件，刚才我们看那个表也看到了，那个表里有一个 status状态的字段，然后这个状态有0122表示说拉黑，那你查询帖子的时候显然拉黑的帖子不能展现对吧？


所以你应该首先写上 status，它不等于2，这才比较合理。


好，然后还有一种情况就是说 uzid有可能是0，有可能不是0，有可能传入，有可能不传入，我需要对它作出判断。当它不是0的时候，我把它拼到circle里。好，那么刚才说了，我们是通过 If标签对它做判断，这个标签是这样写的，然后 if里面需要写一个test属性，test属性里边写上一个条件，我要写什么？就是这个参数它不等于零，参数名叫user ID，我这里就写uzid不等于0，这样就可以了，非常的简单。


此时我要再拼一个条件，拼什么 User ID字段，它等于 user ID那个参数，那井号大括号引用参数user ID，那么大家这里一定要注意，我哪个地方引用的是方法的参数，哪个地方引用的是字段，你一定要搞清楚，你看这样写的是字段，这样的是参数。


好，那么批完条件以后，最后我们对查询的结果，因为不是一条最好给它排序一下，给它一个合理的排序。


Order by首先我order by type倒序type是帖子的类型0，普通帖子一是置顶的，我道具的意思就是说置顶排到前面去了，这个是很合理的，置顶就应该排到前面去对吧？


其次我再来一个 create time desc就是说在你类型一样的前提下，我其次是按照创建的时间，倒叙，就是新的帖子在前面，当然这是我们权宜之计，将来的话我们会开发按照热度进行排行的一个功能，那么那个时候就不是简单的按照这个时间来排序了，我们需要算一个分。


那么那个是将来要做的事情，我们现在先不管，因为现在我们还没有到那一步。


好排完序以后，最后我们还要实现一个分页，分页的话在 oracle里头用关键字limit两个参数，一个是起始行，我们访问奥赛的参数，一个是显示的最大的条目数每一页，访问的是里面好，这个方法我就这个circle我就写完了，我把另外的一个方法的circle也写完以后，咱们来进行测试。


好，那么这个方法还是一个查询语句，它的ID复制了是然后 resolve tag，声明一下是整数，其实不声明也可以就找出它是能识别的，然后这里边我们要查的是数量，其实查询的方式和前面一样，只不过前面查询的是每一个字段，而这个里面查询的是只是数量而已，因为你完全可以把它copy再改。


我这个查询的是数量 com can't ID from this class post。然后实在是不等于2，这也得加上，然后 uzid不等于0，也偏上uzid这都没有问题。因为我们查的只是一个数量，所以你就不用排序了，也不用分页了，就一个值而已，这些可以去掉。


好你看很快我就把蛇口写完了，整个 dao这一层就开发完了，这一层其实是我们比较容易出错的地方，主要是配置文件里写错了它不提示，因此最好我们对它做一个测试，看看有没有问题。


这样我还是在上次课的 Micro test类里对它进行测试，那么我在后面再加上一个新的测试方法，这次方法我叫test，谁来poss。好，然后我把刚才我写的那两个方法都在这里，就一起测了。当然我测的时候要调用对应的map，我得把这个map先注入进来，目前我还没有注入把它注入进来。Out where this cars post member。


然后我就在刚才的方法里调用了 discus post map点select this cast post。这样我先传一个0进去，就是我先不按照用户来查，然后比如说我要查第一页的数据，第一页它是从行号从0开始，然后比如说我要查10条数据就这样，返回的是集合discount post，好，那么我把查询结果遍历一下，然后把它们分别输出一下，好，这是查询每一行的数据我先执行一下。


好，你看看这个查询结果他查到的是10条数据吗？1234、6789 10没问题，10条数据没有问题，然后是倒序排，那么最新的会在上面。这个你可以看一下这个时间，最新的会在上面没问题。好了，接下来我在这个方法里接着写，我再把总的行数也查出来。Rose等于 discuss post member。


第二select rose。我还是传入零不加 User的筛选条件，然后我直接看一下总行数是多少，我再执行一下刚才的方法，看结果一共是149条数据，是不是这样？我们可以在库里判断一下。Select count ID from discuss post。执行151，我这里忘了加那个条件了。 Where status不等于二，忘了加一个条件了，所以不一致了。加上以后149，没错。好，当然了，我再加上 Uzid看一看加上uzid以后它会不会正确。


那么我们有很多优质，我看一下哪个优质的帖子稍微多一点101 0203挺多的，这样的道具，因为我不想看这些数据，这些数据都一样，看不出哪个数据是哪个数据最好看不一样的数据。


这样我就查用户ID为149的他发的帖子好，我把刚才的优质ID就改一下就可以了，149这个地方也是149好，改完以后再执行测试方法，然后看这个结果，最终的数量是三，然后他查的打印的值也是三，没有问题。


好了，经过测试发现我们写的 map没有问题，那么如果你写的时候有问题怎么办？你就其实像我上次课所说的，你就去看一下控制台它打印出来的circle有没有打印出来，我看一下，有打印出的出口，然后通常你一般都是字段写错了，表面写错了，所以说你通过去观察 Circle很容易就能够找到问题所在。


那么数据访问层开发完以后，第二步我们就可以开发业务层，开发的时候它会调用数据访问层，好我就在service包下新建一个业务组件，然后取名叫做this class post service。需要加上一个service注解，好让它能够被容器扫描到，然后很显然我这里要查询，我肯定得调用 map，我需要把这个map注入进来， discus post买法，然后其实我们当前方法他没有什么业务，反正就是把数据查出来就完了，就那么几个参数，其实所做的事情和迈克做的事情其实是一样的，他查到数据以后没有什么额外的处理过滤等等没有，所以说这个方法看起来非常的简单，可能有的同学感觉好像一写这么简单的方法似乎就没有必要，我干脆CTRL了就不调service调map行不行了？


你不要这么做，因为即便是当前我们这个业务方法很简单，但将来没准什么时候我们需要对查到的结果在业务层面做一些处理，这个时候你就缺少这个层面就不好加那个代码了。


再一个我们的代码的层次要有严格的保障，你跨层次去调用的话，那么我们后续在处理它的安全性等各个方面也会遇到一些困扰，所以说即便是我们 service的方法，再简单你也需要 control了去调它，而不要直接去调map，一定要注意严格按照标准结构来。


好，那么我声明一个业务方法查询出某一页的数据，所以说返回的是一个集合。 Different knowledge discuss post，放好名，我叫friend discuss posts。好，那么参数一个是可以传入优质ID，一个是可以传入起始行，一个是每页显示的最多的数据的数量，我直接调用map就能把它实现了，点select discourse。好，直接把条件传进去就可以了。同理，那么再添加一个查询航速的方法。Find discuss，post。Rose然后条件用这ID，然后我就是这样return。Discus。Post map点select，rose传入有的ID好业务层的方法很快就完成了。


然后在这一层面其实我们还有也需要处理的地方，就是我们查询到的 Discourse post这个结果，它里边有一个外键uzid那么我们在页面上显示的时候肯定不会显示uzid肯定是要显示用户的名称，用户名对吧？


所以说两种办法，一个是我们可以在写SQL的时候关联查询用户，然后的话去处理，就是把用户的数据也一起查到，这是一种方式。


还有一种方式是我们可以就是单独的得到这个数据以后，单独的针对每一个discourse post，单独的给他查一下 user，然后把查到的user和discourse的组合在一起，反馈给页面，这也可以，我采用后者，因为这样的方式虽然说看起来好像麻烦一点，但是将来的话我们使用rides去缓存一些数据的时候会比较方便，到那个时候性能也会非常的高，然后我们代码的看起来也会非常的直观。


好，所以说我用第二种方式，第二种方式的话，我们就需要再提供一个业务方法，能够根据user ID查到user这个方法写在 service里不合适，因为这是跟user有关的操作，所以说我们可以再新建一个service，叫user service写在这里比较合适。


好，然后加上service注解，那么我们查询的是用户显然需要把用户的 map注入进来，对吧？User map，然后这里边我要提供一个就是根据用户ID查询，用户的这么一个方法，也是非常的容易 public查询一个用户，所以说返回优点就可以了。发个名。写得直观一点，我叫find user by ID，然后传入的是ID，我就直接return又是map点谁来给他ID就完了。那么这个方法是我们之前写过的，这里就直接复用了，我们就省事了。


好，到这我们把这个业务层要用到的方法也准备好了。那么接下来就是关键的一步，视图层我们就可以基于service去把它实现了。


那么这个视图层我们需要用到一些我们之前准备好的页面以及页面所依赖的样式文件 Gs，因为我们现在是开发正式项目的功能，我们应该把真实的页面把它都引入到我们项目中来，我们还没有做，现在就去准备。


你看这儿现在 style和template的下面它只有一级包，这个时候它是这样一个结构，我需要再多建几级包，因为时代下面还得放样式文件，图片等等还得多建几包，然后timeless下面也一样，但现在是这样的一个显示结构，不方便我再新建一级包了，我一建都建到这个太庙之下了。


你可以这样，你可以点齿轮，然后把勾去掉，它默认是把中间的包给你隐藏了，折叠起来的，你取消勾以后它就按照这个树形能够正式的展现。


好，下面我就把我们项目中之前我上传的这些静态资源考到我们乡镇来。首先样式文件图片和GS，这是静态资源，我们把它复制一下，然后粘贴到时代的下面放这里来就行了。


其次我要把网页粘贴到 template之下，我把 site注意这个index是首页set是其他的页面 copy，然后粘贴到 temps之下，这样我顺便把没有也粘贴过来，没有是我们将来学习发邮件邮件的模板要把它拷过来，然后也是粘贴到 txt之下好了，反正你看我就已经把我们这个项目中要用到的这些个页面和静态资源都拷贝进来了，这节课我们只用一个页面就够了， index首页。


好，反正这里先准备好了，一会用的时候我们再细看，好。拷贝完以后我就可以再把勾勾回来，让它中间层次的空包不显示，这样的话看起来清爽一点。好了。


接下来开发这个视图层，我首先要开发的是 Controller，那么我就新建一个CTRL，这个CTRL我取名叫做说这么大写 home很臭了，我取名叫home很臭了，然后前面加上很臭的注解，然后 controller我就不加访问路径了，你注意controller的访问路径是可以省略的，那么访问的时候就这一级就没有就空的直接访问方法就可以了。


那么CTRL在处理请求的时候，它查询它显然需要调用 service，所以我需要把 service注入进来。Discount post service除了 service以外，把u的service也注入进来，因为你通过它查到的数据中的 u的ID只是ID而已，我们通过user service可以再多查询一下，把优质的详细的数据查到，这样数据就全了。


那么注入这两个组件以后，接下来我就增加一个处理请求的方法，我先定义一下这个方法的访问路径放大一点，把这个不用的先关了。放大一点。Pass等于 index，因为我们访问的是首页，所以路径我叫index，然后请求方式查询它，就用的是 master点干的请求，然后方法它响应的是网页，所以说你就不要写response包点，然后加上说明这个方法，然后我们可以返回末端的view，也可以返回死菌，死菌指的是视图的名字，这样比较方便，我们用这种方式方法名我就叫get index配置，然后这里面加上 model，因为我要通过model去携带数据给这个模板，好，然后最终我返回的是这个模板的路径，那么我们访问的是谁呢？


是 template之下的这个index点html，所以说你就直接写index就行了，那么下面我就来处理，请求的逻辑无非就是查询，我们第一步先查到的是前10条数据，而不是每分页查询只是前10条数据，就相当于是第一页，我可以这样写 discuss，post service，点犯的discount，pose，然后主页，他查询的是所有用户的数据，所以说 uzid传入0，然后第一页从0开始我要显示10条，我先写死，那么一会我们在优化的时候会把这两个参数替换成动态的值，到时候再说了，然后我们得到的也是多条数据类似的。


好，那么查到的数据它是不完整的，主要体现在优质ID，就这个对象里的优质ID，我们只是ID而已，不是用户名，但我们需要那个名字好在页面上展现，这个时候我们就可以把这个集合便利一下。


然后针对每一个 discourse post，我们再根据uzid查到user，然后把这个数据组装一下，放到一个新的集合里，然后返回给页面，所以这里我再新建一个集合，集合里装的是一个能够封装 discourse、post以及user对象的那么一个对象，其实你再写一个类也可以，或者你用一个数组也行，你用一个map也可以，这里我用一个map它的key是string，value是object，你存什么都行，然后我给它取名叫discus poss，实例化一下。


好，然后这个值我需要遍历它，然后得到我先判断一下，你万一这个值查到的是空的，对不对？判断一下，如果这个list它不为空，在这种情况下我才去便利它。This cost。好，那么每次遍历我都需要把最终的结果装到 map里，所以说我先把 map在这里实例化好。牛希map最后一定别忘了，你要把 map装到新的集合里对吧？我就先写上省的忘了，然后在中间我需要往外边去装东西，首先装的是 post，帖子你得装进去， post，然后值就是这个对象。


其次我需要装的是user，这个user我们需要调用user service把它查出来对吧？Find by user ID。那么uzid我们从帖子里找，找到以后，一查询得到了它所对应的user完整的数据，好了，最终我再把优质也装到map里，你看经过这几次循环以后，最终迪斯卡斯普斯它里面的每一个map里，这两份数据就都有了，我们页面展现的时候就好办了。好，然后那么我们需要把最终的要给页面展现的结果装到mod里页面才能得到，所以说你还得写一句话， model点I的h build，然后给这个数据取一个名字discus poss，值是集合好，这样就可以了。


好了，那么CTRL来完成以后，最后一步就是我们要处理这个模板，那么接下来我就打开这个模板，我可以在这里点或者我可以搜，你搜的话就是CTRL CF的n搜，所有的文件我搜的是index，点html找到它，那么首先我们得写成那句话，我需要指定我要用的模板引擎是谁，对吧？Xmlns冒号th等于timeline f点2g其次还要做一件事情就是说我们这个页面上它依赖了一些样式文件或者图片，你像这样的图片我们不用改，因为它是一个绝对路径，写得非常的详尽，没有什么歧义，像它依赖的是一个不是抓捕的样式文件，这也是绝对论证没什么歧义，但是这种路径是相对路径，我们开发静态页面的时候，是这样一个关系，我们引入到我们动态的项目里的话，这个关系会发生一些变化，所以说就不能这样写，这样写可能就会有问题。


这个像这种路径我们也可以通过time leave的语法去处理。


我这里可以这样， th冒号，比方说 href里边引用的这个文件，我是需要通过他们内部模板去帮我找的，然后这里我可以这样写，at括号开头，括号结尾，然后就把这样写斜线css然后global点css那么这样写的意思是让 time leave去哪找这个文件去这个时代下面去找这个资源，所以说这样写他固定会去这样死在下找资源，就不会产生歧义了。


好，注意我们在页面的结尾处还引入了一些GS那么也是类似的处理，反正页面上的你看到的这样的相对路径的图片样式， GS所有的静态资源都用这样的方式处理，我在找到最后的位置，这样GS也是这样的，下面也是一样。


好了，那么这三个不用，这三个是绝对路径没有问题，然后页面上你看起来挺长的，有400多行代码，但其实我们需要处理的没多少，尾部不用管，每个页面都一样，不用动，然后上面头部你暂时不用动，将来需要动的时候再说，我们现在要改的地方主要是集中在这个内容里，而这个内容里，比如说他一开始这个标签我们还不用管，不能都折叠起来，这个标签我们还不用管，弹出框我们也不需要处理，提示框也不我们只需要处理是这个帖子列表的部分，然后因为我们引入的是静态页面，他的数据都是死的，他硬写死了10条数据在这个列表里，10个mi我们需要把它变成动态的，显然我们留一个li，然后以此为模板进行循环输出就可以了，对吧？


其他的9个li就不需要了，我把其他的几个li给它删掉，删掉，只保留一个。接下来我就以 Li为模板，要对这个数据进行遍历输出，那么使用timely for模板引擎做循环输出也是挺方便的，那我要循环输出all抑制就可以了，表示说我要进行骚抑制循环，显示的 li然后循环内部我得指定我要循环，对哪些数据进行循环，所以说这里我要写上表达式，访问的是集合或数组多条数据，我们在CTRL那里不是往帽子里装了这么一个集合，它叫discus poss对吧？


所以我在表达式里引用集合，比如说我要遍历的是集合，每次遍历我们会得到集合中的一个map，对吧？


我们得说明一个变量好能够指代 map，所以我们可以在到了前加上一个变量名，然后冒号，假如说我要询问的是集合，每次循环我将得到一个map对象，当然这只是一个变量名，你叫别的名字也无所谓，为了和我们的逻辑相对应，这里我叫map，因为我装的就是map好了，然后在循环的内部我就可以通过map去获取我要显示的数据，我们看一下哪些地方需要显示动态的数据。


首先你看它这个地方是显示的是用户的头像，用户的头像他目前是写死的，就是显示第一条第一个图片，这肯定需要变成动态的，对不对？你应该显示的是帖子的发布人的头像。


好，那么把这里的值改成动态的，就得需要依赖 TMD模板引擎的语法，所以说这个地方我要前面加上th冒号，意思是我后面的这个里边要包含time leave的表达式动态的数据，可以写上打了括号，然后我要引用变量中的值 map点，map里不是有两个值吗？


一个叫post，一个叫user，我要的是user里的图片的路径对吧？


所以说就是map点，user hider，URL那就行了，这是这个地方有一个动态的值，我们处理完了，好，再往后看，这里是帖子的标题，显然也得动态的对吧？

说话人2 51:44
那么。

说话人1 51:46
当然这上面还有一个链接能链到帖子的详情页面，目前的话我们还没有详情页面，先不用管，先这样，或者说你为了怕误点点错了，你先把它改成井号，就列到当前页面顶部，这样不会误操作，然后我要改变这里边的内容，我们之前也学过，我们需要用 th冒号 text等于然后的话到了这回这个值我还从map里取map点，post点开头，你注意比如说我这里解释一下我们这个表达式，比如说我这里写 map点，user其实它访问的是map点get user，因为 timeline能识别 map是一个希map类型，那么它会调它的盖的方法，然后以u的为t去访问，然后我们最终得到了一个u的对象，然后我们又点high点URL，那么它会访问的是这个u的对象的 Goette、hider，URL，那么对于我们的实体内，或者说对于普通的我们自定义的 JavaBean，它会调用我们的 get方法去访问属性，因为这个属性它本身在这个类当中是私有的，你直接访问是访问不了的，但是他知道通过盖的方法去访问他，所以我们在写的时候写的是点一个属性，但其实它底层叫的是get，这个也是一样的。


好，然后 text其实还有一个表示方式还可以这样写，you taxed两者的区别是 test，只是就是说按照最原始的方式显示文本，而u text有这样一个好处，比如说你文本里有转移字符，它能够把转移字符显示成它该有的样子，比如说你这里头有一个转移字符是and lt这表示小于号，如果你用这个text，这里边就会显示这样的一个你页面上看起来就会很别扭，如果是UTech，那他会把这个转义字符显示成他该表现的小鱼儿的形式。


所以像这种标题内容，这里边他有可能会包含转义字符的情况，你最好用这个Utecht，所以这里我用you taxed。好，再往后看，这儿置顶和精华也需要判断，因为不是每个帖子都置顶，每个帖子都精华，

说话人2 54:37
那么。

说话人1 54:39
必须你是置顶的类型，我才显示这俩字对不对？


你是状态是精华，我才显示这俩字儿，需要加判断来显示，判断的话也非常容易 th冒号if等于然后这里面需要写上判断条件，我们根据什么判断？置顶。应该根据帖子类型对吧？Map点post，这是帖子，然后点太这是它的类型，1=1的时候它才是置顶的帖子制等的类型，这个时候它才会显示，如果这个条件不成立，义务不成立， Span标签是不会显示的，这是if标签的一个作用很方便。


所以你看到了括号里边写的表达式，我们不只是可以访问数据，其实在访问数据之后也可以对这个数据直接做一些运算加减乘除判断相等等，包括三元运算都可以去处理好，你这个会了这个也就容易了。


 Th冒号if等于这个是看状态对吧？Map点post，点status，状态等于一才是精华。好，那么这个精华也置顶和精华咱们也处理完了。


然后再往后看这个地方显然显示的是帖子的作者，那么目前是写死的，你应该把它改成动态的，对不对？那就th冒号，Utecht等于这回是macke的user，从user里取值显示的是user name，后面发布于时间，那是帖子的创建时间，对吧？也是 th冒号，然后这个时间你就txt，它里边肯定不会有特殊的字符等于。那就是 mad dear post，dear create time。那么你注意如果你直接这样写的话，那么它显示的时间格式是西方的那种方式不符合我们的阅读习惯，所以我们还需要对这个时间做一个格式化。


那么 timeline它内置了几个工具，可以直接对这个时间进行格式化，那么这个工具的引用方式是这样的，这样用我先把它剪切一下，diss它有一个diss工具，然后我们可以通过井号引用这个工具号是引用它的一个工具，然后 Dx点 format括号括号里边先写上你要访问的这个数据是动态的吗？


Map点post点great time，然后再来一个参数写上了，你要指定的格式，我希望这个格式是这样的，歪歪歪 mmddhhmmss好，所以格式化日期格式化就是固定的一个语法，它内置的一个APA你记住就好了。


好，再往后看。后面就没有了赞回帖目前我们先不去处理，因为我们现在回帖的功能还有点赞的功能还没有开发，所以我们先不处理了。现在我们可以把服务启动一下，然后试着访问一下首页，看一看它有没有什么问题，如果没有问题的话，我们再去完善分页的功能。


好，下面我就把服务启动一下，一下， run的过程中没有报错，没问题，我打开浏览器，然后访问一下 host8080，然后 community index我们的首页的访问路径就是index。


好，那么你看没有问题，这个效果还是ok的。然后这个数据你看就不是静态页面自带的那种状态了，就是我们数据库里的实际的数据了。


当然目前显示的是第一页前10条没问题，但这个分页肯定是不管用的好了，那么接下来我们就要继续完善分页的功能，那么分页其实大家都操作过，它的逻辑很容易理解，我点第二页第三页，你就给我查询出对应的那一页的数据，当然你点上一页下一页其实就调整页码，和你点23也没什么区别，点首页末页也是一样，总之你就点击这里面的任何的一个链接，其实最终都会转换成一个页码，比如说三，然后你是要把页码传给服务端，查询出第三页的数据，仅此而已，对吧？


再一个客户端它可以决定我这一页最多要显示多少条数据，如果有些网站还可以做成可配的，你要显示多少条，我们这个没有可配，相当于就固定了，这个如果说可配的话，也可以把每页显示最多多少条传给服务端，然后服务端得到的是你当前要显示第几页，最多显示多少条，然后我帮你查出相关的数据，然后再给你。


这个时候服务端给客户端返回的就不只是这一页的数据了，他还得给服务端返回一些额外的东西，比如说最多有多少页，然后你当前是第几页就这个信息也要给他反馈回来，因为你看第一页点中的话它是点亮的，对吧？


所以说当浏览器访问服务器，服务器响应过来的时候，还得把这个是第几页带回来，我好知道到底是第几页，我好把它点亮对不对？再一个因为我要显示一些页码，从几到几页，我得知道那一共有多少页，我会不会超出这个范围对吧？


所以说服务端还要给客户端返回一些和分页有关的信息，客户端要给服务端传一些信息，然后服务端计算完以后还给他反馈回来，所以来回传的数据是比较多的，也比较杂的。


那么我们最好写一个组件把它封装一下，封装完以后能够便于复用，然后将来我们还有很多其他的功能，那么在那些功能里，其实我们也可以把封装好的逻辑能够复用，最好能达到这么一个状态。


好，下面我就给大家把封装分页的组件给大家写一下，这样我就在安推的一个包下，再新建一个类，用来封装的分页的一些条件，我就叫页码对吧？配置。


好，那么这个是写注释，封装分页相关的信息是这么一个组件，那么首先我们可以利用这个对象，从让服务器服务端接收页面传入的信息，我们先解决页面传入的信息的接收的问题。


首先页面你必须得告诉我你当前想显示第几页，所以你要传入的是当前的页码，显然页码应该是个整数对不对？这个变量名我叫carry给他一个默认值，你也可以不写，如果你不传，我默认认为是第一页，好，这是当前页码。


第二个页面还可以传入一个就是你最多要显示多少条数据，那我称之为这个显示的上限，那显然也是一个整数 into limit，也给他一个默认值，你也可以不转，我就按默认值来走。


好，三第三个不是页面传入进来的，是我们需要自己查出来的，我们需要一个什么？这个数据的总数，就一共有多少行数据，这个是我们服务端查出来的，也要塞进来。


我们用这个数据干什么？我们用它来，我们用于计算总的页数，因为我们把响应返回给页面以后，页面上要显示页码，那么它一共要显示到多少页呢？然后能不能超出它总的页数，所以你得页面得知道我一共有多少页，我被显示错了对吧？


所以说他要算出总页数，而总的页数怎么算呢？你表里有多少条数据我除以一下上限，每页显示多少条？一除就知道了。所以这个数据总数需要给我，那么显然也是整数，肉丝。


最后再来一个是查询路径，查询路径，为什么需要查询路径呢？你看页面上我们首页末页某一页这都可以点，很显然这是个链接，我们在页面上处理这个链接的时候，链接上你得带一个路径，那这么多地方都要带路径，如果你挨个去拼也可以麻烦对吧？如果说我组件里带上了查询路径，然后能够把它返回给页面上，直接就复用一下变量不更方便对吧？


所以说查询路径的作用是用来复用分页的链接，就让我们页面上写的逻辑简洁一点。好，那么这个路径是字符串，我叫pass。


好，那么前两个是页面要传给我的东西，后两个是我要自己要设置好的东西要返回给页面页面需要用的。


那么。


接下来我要给它生成get set的方法，因为这些属性是私有的，外界需要通过get set对它进行访问，然后注意这些数据比较特别，我们在赛德的时候还需要做一些。


判断，避免它传入一些错误的不合理的数据，你比如说site，current如果万一他用户乱写，他把这个路径里边的条件写成了负数怎么办？写成了一个特别大的数怎么办？对吧？


所以凯尔我们需要做一个判断，如果说the current大于等于一，这个时候我才会去把它记录下来，我才认为它是有效的，否则我认为它无效。当然我们主要判断它是不是0或负数的情况，至于它特别大也有可能，因为也可能有很多页我们就不管了。


好同理 Set limit也是一样，你不能传入一个特别奇怪的数，那么我判断一下，如果 limit它大于等于一，我认为是合法的，并且 limit小于等于100，我认为是合法的。


就是说我对 limit每页显示的上限有限制，介于1~100之间，那么万一用户说我这一页想显示1万条10万条数据，那么我们一下给查出那么多的数据，一个是对我们服务器的压力太大，再一个这么多数据给浏览器浏览器就卡死了，用户体验也很糟糕，所以说我限制成最多100条。


好再看那么set rose这个也是一样，也得对它做个判断，那么如果rose大于等于0，我再对它inside好，这个pass就不用了。


好，除了这些条件以外，我们还需要补充几个方法，再额外的提供几个条件，这个条件一个是数据库它在查询的时候需要用到的，一个是页面它在显示的时候需要用到的，我们原始传进来的这几个条件是不够的，但是我们另外的条件是通过他们计算而来的。


好，首先我要加一个什么条件 get off site，你想一想，咱们数据库查询的时候，它不是需要你传入一个off site，他要的并不是当前的页码，它需要是当前页的起始行，所以你需要通过当前页的页码算出当前页的起始行给它。


好，我写个注释，这个方法的作用是获取当前页的起始行，是这样一个作用，然后是通过当前页来算，其实很好算，当前页不就是current对不对？当前页乘以每页显示多少条数据，就是当前页最后一行，对不对？你再减去这个里面它不就是它的起始行吗？所以你就可以这样委托这个公式，或者你可以提一下，你可以这样开问题减一乘上里面就搞定了。非常的容易，这个方法是我们在访调用查询的时候，那么需要用到这个方法获取 Offset。


好，然后我们还需要再来再加一个方法，提供这样的条件，get total。这个方法的作用显著是是用来获取总的页数，因为我们一会在页面上要显示的是要显示一段页码，页码的范围你不能超过它一共可能出现的页数，这是为了显示页码，做边界判断需要的一个条件。


总的页数其实很好算，总的行数咱们不是以当前传进来了吗？总的行数你除以每一页显示多少条数据就可以了。当然有可能不整除，有点余数，不管是余几行都再单给单多一页，对吧？再单独多出来一页，所以还有可能是加一的情况，这块就得判断一下了。


如果rose是能够长出里面的，我就委特肉丝除以里面的整数没什么好说的，否则不能整除，我就委屈肉丝除以里面，最后我再加上一就可以了，这块写错了，整除 Rose除以name，0忘写等于0了。


好，这是获取总页数，那么接下来我们还要提供另外的两个方法，我先把方法写上 get from。


Get to就是从第几页到第几页，咱们页面上是要显示页码的，比如说我有100页，我不可能从第一页写到100页，太多了，我们经常上网也知道它一般都显示一段，比如说我当前是第八页，我可以显示6789 10我可以显示当前页前两页以及后两页，其他的我就不显示了，离我最近的两页我把它显示出来，对吧？


所以你还得给他算一下，你根据当前页算一下，我起始页截止页是多少对吧？好，那么我们回来把这个方法写一下，是获取起始页码，这个是获取终止或者说结束页码。


好，那么起始页码刚才说了是当前页，离它最近的两页，当前页起始的得减二，那就是让吧等于凯瑞当前页减二，但是有可能当前页恰好是第一页，你减二以后变成负的了，就不对了，对吧？


所以你return的时候还得判断一下，如果这个数让他小于1减完以后，小于1变成0或负数了，这个时候你就认为它是1从一开始从最小值开始，否则就是它该有的值，所以把左侧的边界定好，不要小于一的范围出现， get to和这个道理就一样了， it to，就等于当前页加上二，但有可能你当前最后一页第一百页你再加二不就超了吗？对吧？


所以你还得判断一下，抄的时候就按照最后一页来算，最后一页整个页数干得头疼，我就return to，如果它大于了头头大于总页数，我截止就显示到总页数为止，否则就显示它本身好了，这样的话我就把我需要的条件都封装在了配置里，那么有些条件是页面传入的，有些条件是服务器自动查传入的，有些条件是我经过这些已知的条件算出来的，那么它总有它用的地方。


我们接着写看一看他们这些条件都是在哪传进来，我们都怎么用的。


我在回到这个CTRL了，我需要改造刚才的查询方法，让它能够支持分页，分页的时候我们也说了，页面会传入分页有关的条件，而这个条件我就可以用配置进行封装，所以我加上配置这个条件，然后配置我们需要给它设置一些我们服务器需要给它也设置一些值，比如说它的总行数就需要我们在这进行设置。Set rose这个总行数我可以查出来对吧？Discuss post service点find rose。因为我们是首页用户ID不以用户ID来查询，传入0，page点set，pass路径，当前的访问路径不是index吗？传进来页面上我就可以复用这个路径了。


配置还有一个当前页码，还有总的每页显示多少条数据，页面可以传进来，这就不是服务器要操心的事了。然后那么还有一些值那是需要返回给页面的配置可以自动算出来，根据这些条件自动算出来，就不用我们去操心了，那个算法已经写好了。然后我们这儿查询帖子的时候，这块就不要写死0了，奥赛的从配置里取，他给我们算好了吗？


配的盖奥赛总的页码，从开始取点get limit， limit从页面传进来，如果不传就默认值好了，然后这个配置我们在这儿利用完了查询的时候，那么页面上也需要它，我们也需要把它返回给页面，你可以这样model点I的actually build，然后的话把配置装到model里，但其实这一步可以省略，为什么我在这解释一下，首先我们知道在spring mvc框架之中，那么这个方法的参数往往是由不是往往就都是由 despatcher asseverate帮我们初始化的， model是由它初始化的，配置显然也是由它初始化的。


那么配置的数据也是由他给我们注入进来的， this spot除了帮我们初始化这些数据以外，它还额外做了一件事儿，它会自动的把配置装到model里，所以在当前的方法里你可以直接调用配置，其实也可以通过model获取配置。


所以这里我解释一下，写这个故事解释一下就是方法调用之前，么spring mvc它会自动实例化 model和配置自动的，而且它还会将配置注入给model，所以我们在timeline这个模板里就可以直接访问配置对象中的数据，你就不需要model再艾特一次，这块有一个隐含的逻辑大家注意，所以到这我 control就改造完了，就这么两两个地方，接下来我们就可以打开首页，然后把分页的逻辑给它处理好，能找到分页的逻辑在这儿。


好，那么这个逻辑处理起来有点繁琐，但是大家要保持耐心，咱们一点一点来别着急。首先我们先处理首页和末页的逻辑，显然首页末页逻辑是应该是相似的，对吧？我们先把它处理一下，因为我加上标签以后代码会变得长一点，这样我把它调整一下，让它有点层层次，这样的话一会不会超出一屏看起来比较舒服一点，是这样的，然后你注意中间这个是显示的是页码，12345这个之前是写死的，这很显然我们一会要把它改造成动态的应该是这页码是循环显示，而不是写死，所以我只保留12345就三了，一会在这个模板基础上循环再来再处理一下好。


调整完结构以后，下面我就去处理一下它的显示的逻辑。首先我对整个分页的区域做一个处理内容做一个处理，因为什么？如果说你没有查到数据，假如说一条数据都没有，假设极端情况出现了，一条数据都没有，这个时候你还有必要显示分页的区域吗？就没有必要了。所以没有数据时它不显示，有数据时才显示咱们搞得严谨一点，因此我写成th if等于好。


那么我怎么判断它有没有数据，那么刚才不是说了吗？


一个你可以看 Discus poss对吧？它里面有没有数据，再一个你也看可以看配置，因为配置里不有行数，如果你一行都没有，也就是没有数据，这里我就看配置，我就hit点rose，实际上它掉的是get rose方法，如果它大于0，这个时候我才显示这个区域，这是这个地方的编写。


然后再写首页的逻辑，主要是处理这个链接，这个链接里边得是一个动态的拼了一个链接的字符串，所以我们还需要用到 time leave th前面加上th然后艾特括号括号里边我要拼上当前的页面的防路径配置里有对吧？


你需要访问配置里的变量，你就这样写到了括号配置点pass，然后访问到了这个路径以后，你可以后面加上还得加上这个参数，因为你首页其实就是访问第一页，你得加上开始等于一，你可以这样写问号，它让它等于一，然后到了括号语法里边还允许你这样写，你可以直接写个小括号，然后 carry等于1，那么它会帮你转换成问号，carry等于1，其实都可以，然后这样写的话，如果你还有一个条件你就逗号，然后比如说limit等于比如说等于5，这样也可以，中间以逗号分隔，那么他最后给你拼出来的效果就是这样的。


我说你这样随便写一下，比如说他平常是这样，index，然后问号，carrot等于1and limit等于5，是这样一个结果，但我们只需要这样写，当然我现在我就不拼 limit了，默认10正好我就只写一个凯伦的首页，你首页会了末页逻辑不跟他一样对吧？


末页也是路径复用，然后当前页等于几，它就等于总的页数，而总的页数配置里不是也有吗？变量通过表达式获取，有没有少写一个大括号，整的页数里有配置点，偷偷就可以了，所以首页末页咱们就处理完了，处理完以后再来处理上一页和下一页它的逻辑肯定是相似的，对吧？


上一页这个路径也是类似的写法，提示冒号，然后艾特，然后也是路径也是配置点pass，后面也是要带上当前页是几，当前页那得等于这个条件就等于实际的当前页减一，因为你上一页对不对？而实际的当前页是个变量，它不断的变化，你是配置点，carry减一对，是这样的，然后检查一下，千万不要少写了一个括号的结尾，没问题。


好，同理下一页也是类似，下一页就简单了，加一是吧？加一就搞定，最后再处理页码，页码不是永远显示一，它要显示从几到几那显然得循环，那么循环的话我们还是用 thh但th一是之前我们用过它里边我们要传一个集合进去，现在我们是要从比如第三页到第八页，这是两个数字怎么办？


其实贴 timeline它也有相关的知识，然后这样去做，它有一个还是一个工具叫numbers，numbers这工具有一个方法叫seconds，这个方法会产生一个返回给你返回一个数组，返回一个由数字连续的数字组成的数组，数字的起始和终止的那两个数你要指定好，我指定一下，这个一个是配置点 strong，另外是配置点，你注意这个地方你不用选dollar了，因为我在这已经写过了，表示这里边都是变量，这里边我们调的是一个工具里边这是变量，所以这地方你就不用再写一个dollar括号了。


好，那么这句话的意思就是说我要生成一个从这个数到这个数之间的连续的一个数组，得到数组以后，我还得有一个变量来引用每一个数字，我就前面加个I吧，发一个冒号，然后每次我们要显示的页码 I对不对？ I所以我在这儿 th冒号，tx等于通过表达式引用这个变量a就可以了。


好，那么除此以外还有一些细节要处理，什么？如果你当前是第一页，上一页就不可点，如果你当前是最后一页，那下一页就不可点，首页末页无所谓，因为你是最后一个点下一页就超了，你第一页点上一页就超了，这个不行。再一个页码，当前是第几页要点亮，我们把再处理一下就搞定，好。我们先来处理上一页和下一页，你看上一页我们页面上默认它就不可点，这个不可点样式是通过disable实现的，只要你在 Li加上disable，它就不可点，你不能永远写死，而是用来动态判断。


所以 class这里边样式你要动态的添加，它是一个动态的值，所以前面我们用加上th表示说这里边我需要有动态的数据去处理，那么当然这里边不只是有动态的数据，这个是固定的，那么我们在这种情况下，用固定的数据再拼上一个变量怎么搞，可以这么处理。


就是你加上两条竖线表示说这里边有静态的值，这是静态的值，然后还有变量，有空格还有个变量，你就到了大括号拼变量就可以了。


好，那么我要不要拼 disabled，你得看一下我当前是不是第一页，我是就拼上disable就不让他点对不对？而当前页是配置，第二carry当成一2它等于1吗？如果等于一我就不让他点，就把样式加上disable，如果它不等于一就可以点，我就什么也不加空的，ok这就搞定了。


同理下一页不是一样的逻辑， th对吧？然后也写上竖线，也是在这竖线里边拼上一个变量，那也是看当前页配置，carry它等于等于就不是一了，它得等于最后一页，最后一页是配置的total，如果他等了我就加上样式不可点，如果不等我就什么也不加，可以点。


好，上一页下一页搞定，最后还有页码。好，页码点亮与否，你看一点亮了2345没点亮对吧？我当年刚好留的是一，点亮与否看的是哪个样式是样式 active。如果你在xli上加上active，它就被点亮，不加active就不点亮，所以说很显然的 Class还得是动态的去拼，也得是th对吧？


也得是竖线，然后让一个静态的值，最后拼上一个动态的值，什么时候我会把当前页码点亮，那就是当前页，刚好 I刚好是当前页的时候对吧？


因为我们页码 I I刚好是当天日的时候就点亮了，所以这里面你可以写 I它等不等于配置 character，如果它等于我就加上IQ把它点亮，如果不等于我就什么也不加就可以了。


好了，你看这个地方写这个标签还是挺挺麻烦的，不过好在我们写完一次以后，那么其他的页面上所有的页面的分页它的逻辑都一样，以后就可以复用了，我们再也不用写第二次了。


所以你写的时候你也是按照我这样就是一步一步耐心点，把它一次性的把它搞定，下一次就好很多了。好，那么完成以后，下面我们把这个代码重新编译一下，我按一下CTRL f9，然后我再重新的访问首页看一看刷新，刷新以后数据默认第一页没问题对吧？


还是第一页没问题，然后你看这个页码就不是12345了，它显示的是当前页码的相邻的两页，前面没有，后面就两页。没问题。我点下一页可以吗？第二页没问题，然后当前页相邻的2页到4了，下一页没问题，下一页没问题对吧？上一页也可以，末一页没问题，当末页第十五页的时候，下一页不能点了，对不对？首页没问题，首页第一页上一页就不能点了，对吧？这回我们终于就把首页功能完成了，那么把分页稍微麻烦的功能也完成了。


好了，这次课我们就就演示完了，我们要演示的内容，那么你课后一定要把第一个功能好好的把它自己把它搞定，然后的话这样会比较有成就感，你第一个功能搞定，这是一个好的开始，那以后的话我们一个功能的去把它做出来，那么这个项目慢慢的完善起来了。好，这节课我们就讲到这里，咱们下节课。