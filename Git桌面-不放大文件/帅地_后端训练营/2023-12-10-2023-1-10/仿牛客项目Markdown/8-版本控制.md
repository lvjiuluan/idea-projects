8-版本控制.mp4

说话人1 00:03
这次课我们来介绍版本控制，那么版本控制的作用先说一下，第一个我们通过版本控制可以对代码进行一个备份，万一说你的电脑的硬盘坏了对吧？有备份的话还可以恢复，不至于把代码丢掉。第二个那版本控制它是会将你的代码每一次变更都记录下来，有一个历史记录，那么万一说你这一版的代码改坏了，还不如上一版，你可以通过历史记录恢复到上一个版本。


然后再一个我们通过版本控制工具，还可以让团队成员之间互相协作，比如说我把代码上传到版本控制服务器，那么你可以下载到我的代码去看去改，同理你上传我也可以下载，所以团队成员之间是通过版本控制工具去共享各自的代码的。


好，所以说我们基本上上班的第一天就是你把jdk安装好，集成开发工具安装好，然后一定也要把妹妹或者是版本控制工具都安装好，基本上这是你第一天上班就要做的事情，所以说我们在第一章就对它进行讲解。


而且我们现在是开发完了一个功能，这个代码你是时候去上传去备份了，那么以后每开发一点代码你都上传一下备份一下，这样的话对这个代码的安全性有一个保障。


那么版本控制工具是有很多的，早先有什么cvs然后有 Svn等等。目前的话比较流行的是用 git，我们课堂上给大家讲 git怎么去安装，怎么去配置，然后怎么去使用。基本上我们讲的内容分为三个方面，第一个先给你介绍一下这个git，然后我们把git安装好。


第二个就是说给大家讲一下 key的常用命令有哪些，我们通过命令行，然后去将代码提交到本地仓库，然后再将代码上传到远程仓库，把地的它最核心的命令给你演示到位。


最后再演示一下在idea当中我怎么去集成date，我怎么利用idea去操作date。


当然我们最终在以后做项目时往往是用第三种方式，可能第二种方式用的少，但是你了解这些命令，也就能明白那idea他帮你做了什么事，或者说 idea当中我们每一步操作其实操作的是什么，它背后执行了哪些命令，然后 git它的官网是这个网址，我们可以去看一下，我已经提前打开了，咱们看一下，就是这样一个界面，然后那么如果你想下载的话点 download，一会我们再下载，然后如果你想去看一下这个手册，就点 documentation，这里面 reference是它官方的手册，然后 book是它官方的推荐那本书，我倒是建议大家去看这本书，因为那个手册它那个东西比较罗列的比较详细，看起来比较繁琐，而这个书看起来比较有层次，关键这个书写的确实挺好的，而且它还有中文版，你在这儿你可以选简体中文，所以说我们阅读起来会非常的方便，你看看这个书就好了。


那么这个书其实你要看的话，首先看第一章，看看这个版本控制的一个介绍，然后怎么去安装，这是我们需要初学时要看的。再一个重点是看第二章，第二章主要是讲 Get的基本的命令，那么其他的你有精力看一看更好，如果没有精力的话，看这些反正也能用起来。


好。首先我们先看一下关于版本控制工具，其实关于版本控制早先的话是采用中央服务器的方式去管理代码，就是说我们所有人把代码都存到一个版本控制的中央的服务器，它这里有一个123各种版本代码，不断的升级不断的维护。


那么 ab不同的成员，不同的开发者都需要从服务器上去下载代码，然后在本地修改再上传回来，他再下载，以此类推。


好，这种情况就有一个问题，如果说这个服务器他的硬盘坏了，可能就比较糟糕了，那就会对这个代码造成比较大的影响，整个历史版本的信息就都丢掉了，这是传统的以前的方式的问题。


那么 git它采用一个比较新的方式叫分布式版本控制系统，那么它也有一个中央服务器，这里面也有各个版本的代码的存储，然后我们ab每一个成员也是从这去下载代码，然后把改好的代码传回去，也是这样的。


但是我们 ab每一个成员每一台个人电脑上也会存一个一每个人也会存一套代码，或者说我们每个人的主机上也有一个仓库，服务器，我们叫远程仓库，我们本机上存的代码我们叫本地仓库，我们我们的代码是先存到本地仓库，然后觉得没有问题了，我们再统一的推送到远程仓库上去，这叫分布式部署。


那么这样的话就是说你服务器上和每一个成员的电脑上都有一套版本控制的代码，万一说哪天这个服务器，那么每个人的电脑上还有这么一套备份，你去询问一下你的成员谁的代码是比较新的，我们利用这套代码去恢复就可以了，这样比较安全。


然后还有一个好处是我们在没有网络的环境下也可以去往库里提交代码，因为我先提交的是到我本地的库，我先提交到我本地的仓库，然后有网络的时候再推送到远程仓库，所以这样的话它的效率也比较高，速度也比较快。


好，这是 git它的一个特点，它是一个分布式的版本控制系统，设计里面就比较先进，然后如果要安装的话，我们可以看1.5，这一节他这里介绍了在Linux上怎么安装，MAC上怎么安装，然后以及在windows上怎么安装，在windows上你可以点这个链接去下载，或者说在刚才我们官网首页上也有一个download的地方去下载都是一样的，比如说我点字儿，然后它就会建立连接，然后开始下载64位的，其实我已经下载好了，这里我就取消了。


我们来看一下我下载好的程序，接下来我就把它安装一下，安装其实没有什么特殊需要说明的，我们就下一步你放到这其实也行，我还是把它放到d盘 d盘下面然后下一步默认就可以，下一步不用动，下一步默认就可以，下一步一路好，总之改一下路径，其他的地方一路默认就可以安装好好。


我的git已经安装好了，我来测一下，安装好以后你可以在 windows里去找到它， git，然后它有几个图标，一个是git bus，其实这个就是它模拟了一个 Linux环境，你点开以后它是一个命令行工具，这里面写的是 Linux系统下的命令，不是 windows，所以如果你熟悉 Linux命令的话，你可以在这里去用。


然后除此以外，还有 get come on windows的命令行工具，还有g的gui是一个可视化的界面，但他做的也不好看，然后的话我也没用过，因为我一般都会用这个命令，一般我们用这种工具都是用命令行，不会用这种很少用这种gui的工具。


因为我的电脑是windows的，所以我就用这个我就不用 Linux命令行工具了，好，那么我打开了以后，我就随便哪输入一个这个命令，然后看一下不起作用，测试一下get，然后看一下它的版本。 Git version，它打印出来的版本是2.21.0，没问题，这就可以了。


好，那么在此基础上我再给大家演示一下， Get它的常用的命令有哪些，怎么去用。首先我先演示一下，我在本地仓库里怎么去使用 Git去管理我的项目中的代码，然后再演示远程的，然后再演示idea怎么去用好，我先演示本地的，那么如果你想用这个git不是装好以后马上就能生效起作用的，因为你是要把代码存到仓库里去，它得有一个标识得能识别你是谁，所以你首先需要对 git进行一个配置，你要告诉 git我的用户名是谁，我的邮箱是谁，这两个都需要进行配。


好，我就配一下，首先我们敲这个命令it凭杠杠list，就是我看一下，当前它默认已有的配置有这么多，然后这里面现在没有用户名，也没有邮箱的配置，我们需要配的是用户名和邮箱，我就配了。配用户名 can fake，然后杠杠个logo全局的用户名，然后悠着点name，然后后面跟着一个字符串，你随便写我这里写成就是我的名字的拼音李洪贺，回车这就可以了。


然后再配一下我的邮箱 get挺杠杠，格罗伯也是全局的，悠着点。


Email，然后再写上我的邮箱，那么我在牛客网的邮箱是李红鹤艾特到com。好我就用这个了，然后回车也就ok了，没报错就行了，然后我们检查一下配置里会不会多这两项，还是用刚才的beat挺杠杠。List好，你看它下面多了两项，一个是u的name李鸿鹤，一个是EMAIL，李鸿鹤脑壳的到com，没有问题。好，配置完以后，我现在就可以利用 git去管理我的代码了。比如说我现在有一套代码，我需要把它传到这个仓库里去，存到本地仓库里先怎么去做好，我先用它管理哪套代码，我看一下。


我先随便找一个测试，咱们之前不是用面板工具创建过面板demo一吗？我就先管理一下，那么你要管理哪个代码，你需要先 CD，这个项目 CD到目录下才好，对它进行管理好。我就CD一样，我先去d盘，然后CD d盘 d盘work。Work space。没问demo一。先这儿，到这儿以后我们需要先做一个初始化，比方说我这个项目需要交给git这个工具去管理，那么get需要初始化一些数据，你这样写get you need很快就完成了。其实这件命令会导致get工具会在文件夹下创建一个隐含的目录，叫get这里面有一些答案，需要用到的数据隐藏，我们也不需要去看你，了解这一步他干了什么就可以了。


这里也做了一个解释，然后我们可以看一下当前我 Git管理的这套代码它的状态，hit status不用细看一看，他说泡沫的xmlsrc他盖的这几个文件和目录都是红的，就表示说我们还没有把这些个文件和目录添加到库里，还不受管理，还不受库的跟踪。首先我们需要把他们添加到我们的本地仓库中去，怎么添加呢？也非常容易get ade。比如你要添加所有的xml文件，就新的xml，所有的Java文件就新招，如果是你一股脑什么都添加，直接就星。好，然后爱的星以后，我们再去看这个状态，get status。他会列举了你看这么多绿的，绿的就表示什么，这些文件已经被添加到了本地仓库中去，只是加进去了，只是临时存在，但是还没有正式的提交，所以你还要提交以后才能够永久的在仓库里进行一个存储。


怎么提交呢？是这样的。Get to meet杠m杠m的意思是我给这次提交写一个备注。好，知道我这次提交了什么，这里我就测试随便写了，就test一回车，然后他就开始提交了。很快速度很快本机操作，然后我们再看状态，他说nothing to me的就没有了，这些刚才的那些文件都已经被提交过了，没有新的文件需要提交了这样一种感觉。


好，比如说我去改一下那个代码，看看会怎么样，我随便比如说改 Test，我就随便改一下记事本，比如说我就在这写一个一注释一，好，改完以后我们再看这个状态，你看它提示这个文件是modify的，是被修改了，但本次修改的内容是红色，比方说本次修改的内容还没有提交到仓库中去，还没有加到仓库中去，我需要把修改的代码添加到仓库中去， get还是爱的。行。


添加去以后我再看状态变绿了，比方说添加进去了，但没提交，我再提交一下，写个备注也就是test二。好，然后再看状态，没有东西可以提交了，比如说我都提交上去了。好，那么总之我们在本地仓库就是管理这个代码其实非常方便，就那么几个命令，盈利的一下，然后实力的看状态，爱的就添加，肯定的就提交，就这么简单。


好，这是在本地仓库，我们去管理代码，我们最终的目的一定是想把本地的代码，本地已经提交过的代码，不是临时的传到远程仓库上去，那么远程仓库当然你到工作单位可能公司他自己会搭一台服务器，搭一个远程仓库，那么也有的公司可能直接用 Get up第三方的，现在很多人都听过get up，你也可以把代码传到get up上，然后你像我们也可以把这个代码传到牛客的 git仓库中去，咱们牛客网也是有公共的git仓库的，只要你有游客账号默认就能用也很方便。


所以我在课堂上给你演示的是，我怎么把代码传到牛客的远程账户上去，要想把这个代码传到远程仓库上去，首先你要注意 git为了传代码安全，避免这个代码被偷。那么它在传输的过程中需要采用 Ssl安全连接安全的方式去传输，所以说它首先需要我们去创建一个密钥，需要配置一下密钥，这样的话才可以启用这种安全的传输方式。


那么怎么去创建密钥也是很简单，就一个命令我们来执行一下，在这直接敲了 ssh杠提给然后空格杠t当然这个命令你在手册里能找得到，我就直接写了。


然后是rsa杠c后面的话要写上你的你的邮箱，就是你的 git账号的邮箱，not code.com好回车，然后在生成的过程中，它会有一些询问说你要把 key生成的密钥存到哪里去，怎么样，其实我们都可以一路默认，你就什么也不用填，直接回车，然后直接回车，直接回车就完了，看到这样的一个界面就表示生成完毕，好。


我们去看一下它生成到哪了，其实它这有提示它生成到了这个地方是这个文件，这个文件好，我们打开看一下，是c盘，然后 users用户automatic data，点ssh这个文件我需要把它打开，用技术把它打开，然后把整个一长串密钥复制一下。


好，复制完以后，我们需要去远程仓库的外部界面上去进行一个配置，把我的密钥添加到远程仓库上去，这样远程仓库才能接受你传的代码。


好，我说了我要选择是牛客网的远程仓库，但是如果你用其他的远程仓库也是一样的，使用方式牛客网我已经打开了，那么我们在这儿点个人主页，然后左侧有一个项目的目录在这儿配，然后这儿有get账号的设置，那么这个地方你要注意你的牛客的账号需要绑定邮箱，而且需要绑定和你 git配置的一样的邮箱。


这个要注意，你不能说我给他配的是一个邮箱，这是另外的一个邮箱，这俩不一样不行他俩得一样，你注意，所以如果说你的邮箱没绑定你，然后先绑定一下邮箱，然后就可以用了，然后在下面去添加你的密钥我已经添加过了，因为我是之前用我的笔记本往上往往上传过代码，然后的话笔记本它的密钥是我现在讲课用的是一个台式机，我可以再添加一个台式机的密钥，可以用台式机也往上传，你要添加密钥就点添加ssht就可以了。


然后这里把刚才复制的这一大段拷过来就行了，上面你给密钥取个名字，这就是我的PC机就PC确定这就行了。


那么配完以后我要往这上传代码，首先我们得自己建一个仓库，或者说我们建一个项目，然后我的代码要传到这个项目里，我就在这儿新建一个项目，当然这个是我之前传的一会也有用，我再新建一个。


那么这个我就叫没问demo一，因为刚才我不是在本地提交了，没问demo一，我就希望把没问demo一传到远程仓库里来，所以我创建的名字和它保持一致，然后这里可以是选择是公开的还是私有的，我就公开，然后创建好远程的项目就建好了，当然里面什么都没有，你可以点进去看，什么都没有。


然后这是它的分支，它可以有多个分支，默认它就只有一个master，主分支我们就是要往分支里传。


代码目前什么都没有，后面的话它有一些提示说让你去做配置要怎么办？


什么命令，然后你的邮箱要怎么配，你创建仓库的命令要怎么去敲等等，其实也有一些提示你也可以参考好，我就不给你细看了，我就直接演示，你要注意我们创建好这个项目以后，我们要访问这个项目的他的访问的路径，或者说他的 git仓库的访问地址是什么，其实就是当前的路径，后面加上点git，其实后面也有，你看他传的时候就是当前的路径点kit就这样。


好，我把拷一下，把它拷一下，这是当前我建的项目的仓库的远程的路径，我要传的话得依赖这个路径好。


我再回到命令行工具，那么首先我需要在本地先声明一下远程仓库，或者说我先关联一下远程仓库，主要是给远程仓库，给刚才的路径取个别名，以后我再去访问远程仓库的话，用别名，而不是每次都敲这个网址，这个不好记。


好写命令 get remote远程操作，添加一个远程仓库取个名字，一般它默认名字叫orange，我就按照这个来取名，然后后面把刚才的路径靠过来，别忘了后面带上 git，回车这就建好了远程仓库，在本地声明的远程仓库，它的名字叫rng然后现在我要把明文demo一中的代码传到这里来，那怎么传非常容易 get，post就推送杠u然后 orange比如说我要远程去传到他的仓库里哪个分支， master目前就一个master，Twitter回车以后，它让你输入账号密码，其实就是你牛客网的账号密码，但这个账号要输的是邮箱，密码是你牛客网的，就是你输入你注册的牛客网的邮箱和密码就对了，好我输入一下，输入完以后确定以后他就开始传了，因为这个代码比较小，很快就传完了，传完以后咱们可以去看一下，我再回到优客网，刷新一下你看没文弹幕一下，就有了 src target他们的xml比如说我去点 src test，我要进去看，而且你看它这个版本也有， test一test二，它的历史版本都是有的，然后我进去看一下这个代码，对不对？


没错，这个注释一不是我刚才加的，对吧？好了，那么如何把本地的代码传到远程登录上去，就是这样就很方便。


然后我们还有一种需求，比如说我远程仓库上本来就有一个项目，他我想把它下载到我本地，我好去看，我好去学习，或者我好去在这基础上去改怎么办？你可以点这个项目，先去查看一下这个项目的路径。好，其实你点点开以后，它这有一个克隆或下载，其实克隆就是我要把这个项目克隆复制到本地仓库中去，你点一下它就会给你一个提示一个路径。


这路径有两种形式，一种是https的格式，一种是ssh的格式，用哪个都行，我就用这个复制。


好路径以后，我就要从这个路径 copy，就是克隆代码到我本地仓库，那么我们再回到密码工具，你想把代码放到还得CD到哪个位置，我看一下我放到哪合适 Work，我就放到work space之下，因为这里边没有叫spring boot demo的项目，我就放到这里来，所以我就CD点点回到work space这集目录下，我要在这里，然后去克隆远程项目，那就是这样写 get可弄，然后把刚才的路径复制到这个地方，然后回车，他就开始克隆了，很快就下载完了，完了以后你看一下本地就有了这个项目 spring boot demo就有了，而且不只是有项目，其实它也包括了，它也包括了其实给对它的历史的管理的一些信息都在 get目录下都隐藏着。


所以说这个项目不只是我们看到这个项目代码本身它的历史的版本都有好了，那么命令行常用的命令我就演示到这里。


当然git其实还有很多的命令，我不挨个演示了，然后的话其他的你可以自己来查阅一下手册。另外的话如果你喜欢看视频的话，牛客网还课程里面其实有一个专门讲地的课，而且是免费的，你也可以去看。那么最后一步我想利用 Idea去管理git，我们在idea当中把git配置好，利用idea去操作get去管理我们相关的代码，这样就不用敲命令了，那么我们写完代码以后点一个按钮，那么很容易就传上去了，这样比较方便。


好，这样我就打开我的这个idea，然后比如说我就要管理我肯定的项目，我要把它传到远程仓库上去看怎么办？首先我们需要配置一下get，因为这个idea他不知道你给他装在哪，你要告诉他你可以点 file，settings设置，然后在这working control版本控制工具这里边选，然后这个地方主要是你要选择一下你get的安装程序在哪里，点一下这个图标，我是装在了d盘work get下，那么你要选 b目录下的git点exe好。


Ok，然后这样就行了。


怎么好像没选中再来一遍，怎么刚才好像没选中似的。


Get be git点exe好，然后选中以后 apply ok好，这是beat的配好了，配好以后我要管理这个项目，首先是要它把这个项目初始化一下，然后要把这个项目添加到本地仓库中去，然后再推送到远程仓库中去，和我刚才的命令行操作是如出一辙的，是一样的。


只不过这回不敲命令是通过点按钮的方式去做好，我要操作的是整个项目，传的是整个项目，那么选中这个项目的根目录，然后 vcs，版本控制工具版本控制系统，然后 import into working control。我要把它导入到哪个控制工具中去，这里我选择创建get仓库，其实就是初始化在本地。


好点中，点中以后他让你选中这个项目项目目录，那就是一个community没有问题。Ok，然后很快你会看见这里的文件变红了，那就意思是说他已经把项目给我初始化好了，而且他还做了一个添加的动作，爱人帮我做了。你展开看，你看这里都变红了，说明了这个文件已经被添加到北京仓库中去了。我们在本地的路径下看，community get隐含的目录也有了，说明它确实做了初始化，做了添加的行为。


好，那么我要把这个代码提交到本地仓库怎么办？还是点选中项8点cvs，可以直接点to meet或者是你点 get。


下面的to meet也行。我就点这个to meet，然后它弹出一个对话框，这里让我可以选择我要提交的代码，你可以有选择的，提交一些代码，一般像 maven自带的一些文件我们可以不去提交，因为那个文件提交上去也没有用，我们主要是要提交 Java，还有一些配置文件，像腾飞的目录下，其实这个目录下就都要，然后 resource之下的文件也都要， test之下也要Tom点xml也要，其他的，其实这种文件就不需要了，好。


然后但是这儿我这窗口有点小，然后这儿还要写一个提交的备注，说首次提交第一次提交代码，然后点to meet。好，我要确认就是to meet再确认。它有一些提示你不用管you can meet就可以了。然后你发现提我们选中的提交过的代码变白了，就表示他已经入库了，其他的这些文件不需要不用管了。


好，就这样。那么要想把它提交到远程仓库，首先我还得在远程仓库上建一个项目，我就回到牛客网，然后回到这个界面，然后我新建一个项目叫community，也是公开创建，建好以后我还得知道他的路径，它路径其实就是一个网址，加上点get，或者是你从下面去找，就这个好。


我再回到这个idea。那么我要把这个代码提交到远程仓库，还是点 Vcs然后get然后是pose， pose是向仓库推送数据，如果仓库中的远程仓库中已经有了别人更新的数据，你可以破把它拉取到本地。


我这里就演示pose，因为没有人去帮我改代码，我只能pose好点pose，点POS以后这里需要先定义一下远程仓库，就像刚才我们敲命令，执行 remote命令是类似的，定义一个远程仓库，名字叫orange，默认的URL拷过来，然后 ok那么ok完以后，右侧它列出了，那么我们当前本地仓库已经提交的代码，我们就是要把这些代码提交到远程仓库对吧？


我就点 pose在提交的过程中，它要求你输入你的 get的账号密码，远程仓库的账号密码，牛客网的账号密码，账号是邮箱密码，就输入你的密码，然后记录然后落地，这个时候再连上以后就开始存了，最后的提示说成功了。


好，我们再打开远程仓库刷新一下，你看这个代码就有了。 Apart的xml sa si SC下may may下有这个Java calm Lowder community等等这样的一些代码。好了，我们就已经把我们目前的代码上传到了远程仓库做了一个备份，当然你也可以通过这种方式和别人去分享你的代码。好了，这次课我们就是把 Git安装好也用起来了，希望课后大家把它装好，然后把你现在的开发好的代码都提交到游客的 get仓库中去，把代码做一个备份，好吧？这次课我们就讲到这里，咱们下次课再见。