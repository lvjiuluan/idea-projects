5-Mybatis入门.mp4

说话人1 00:01
这次课我们来学习my best。 My best它是一个访问数据库的框架，所以说我们在学它之前还得把数据库装好。这节课我们要装一个my circle server， My circle的服务端，还要装一个my circle的客户端， my circle，rock本子，那么这两个软件在它的官网都能够下载得到，这个链接是下载 server，链接是下载客户端，那么这两个网址我已经提前打开了，咱们看一下，当前这个就是下载my circle服务端的页面，然后我们需要往下拽到这个地方这里让你选一下你的操作系统，我默认 windows就是适合我的。


然后当前我们要装的 co的版本是8.0.16，也是最新的版本，后面它有两个GIP的压缩包，那么第二个稍微大一点，然后它带有调试，还有测试的一些工具我们不需要，所以我们现在第一个就可以了。


你点 download然后进入到这个页面可以开始下载了，然后它会提示你是不是要登录什么的，不需要你直接点这个链接 no就可以了，然后就会开始下载，那么我已经下载好了，所以说我就不点了。


然后另外的一个页面是my circle，本子它的下载页面也是往下拖拽，也是这样的界面，选这个操作系统，然后这里边只有一个文件，你就点登录的，然后这个页面也是点漏，然后直接开始下载。


那么这两个包我都已经提前下载好了，给大家看一下。在下载的目录下，这个是my circle的server，这个是my circle本，咱们一个来装，我先给大家装一下 my circle，server它是一个压缩包，你解压缩就可以。我把它解压缩到 d盘work目录下。


好，然后我去打开目录 d盘，work my circle。


然后 my circle直接启动是这个有问题，我们是需要对它做一些配置，做一些初始化，那么我们需要在它根目录下创建一个配置文件叫卖点ini这个文件其实不难，然后我提前准备好了，在这买点imi另外还有几个社科文件，这都是我们后面的课程里面要用到的。


那么这些资源我课后都会上传，大家可以下载得到，好，现在我把配置文件拷贝一下，然后粘贴到my circle的根目录下，这里要稍微改一下，把它打开，这里什么支付及ututf8这个端口3306，然后最大连接数20，这个不用搞得太大，因为我们是个人电脑，支持不了那么多链接，20个也足够我们用了就可以了。


然后默认的引擎in the DB这都没问题，那么唯一需要改的是路径，这就是你my circle安装的目录，因人而异，我们得改一下，我把我的路径拷贝一下，然后粘贴到这个位置，配置文件就配好了，配好以后还得需要对买色卡做一些初始化，需要执行一些命令，然后才能用。那么执行这个命令我们需要进入到 B目录下，然后去执行。


就当然了，即便是你给 b目录配置了环境变量也需要这么做，然后你配初始化好了以后，正式使用马赛克的时候就可以不用到目录下执行了。


好，这样下面我我先把你们先配好，省一会忘了，我把 b目录拷贝一下，然后我的电脑高级系统设置环境变量，然后双击pass，新建一个条目，把 my circle b目录配到这里，以后我们直接在命令行里访问my circle，直接就可以敲它的命令了。


但再强调一遍，就是我们初始化命令一定要CD的 b目录下去敲才可以直接敲，不行，哪怕是你已经配好了黄金亮也不行，一定要注意。


另外我们初始化的命令还不能说直接普通的方式打开命令行，你还必须用管理员的身份打开命令行工具去初始化才可以，这个也是一定要注意。


好我就点窗口，然后搜一下 cmd，命令行这个工具，然后右键以管理员身份的运行，然后像刚才说的，我们要 CD到 my circle的b目录下，我的目录在d盘，CD的d盘，work my circle b目录下，然后我们需要执行几个命令，第一个命令是 my circle，d就是my circle的后台服务，然后 initialize ina TIAA elyse ee初始化，然后将初始化的过程打印到控台，我们好能够看到一些关键的信息回声，那么它就会读取配置文件，然后帮我们初始化相关的配置。


这里面关键你要记一个信息，你看这句话我放大一点，就放大一点。看这句话就倒数第二句他说 a temporary password，一个临时的密码is generate生成了for root at Google host就local host是本地 root。默认的账号，一个默认的密码，针对本地的root账号，一个默认密码生成了，那个密码是谁，就是这个字符串。


每次生成都不一样，而且很诡异这个字符串。所以最好你把它选中，然后右键拷贝一下，一会好用我把它记录到记事本里，反正一会不小心丢掉了，是这样的。好，这还没完，接下来我们还需要就初始化好以后还需要正式的安装服务，你敲这个命令很快服务就安装好了，安装好以后我们要启动服务。Net start my circle。


好，到这 My circle的服务就启动成功了，启动完以后这个界面就不需要了，我就把它关掉。 My circle我就可以正式的访问了，我再用普通的方式打开这个命令行工具。房mesko命令是Escaut杠Yoo，然后后面跟的是账号，就是root，然后杠p表示说我需要按照密码的方式去访问，回去以后让你输入密码。刚才我不是复制了吗？


右键粘贴到这个地方，回车就可以了，但是你用默认的密码登录，他不让你做任何操作，因为他也知道这个密码你记不住，下回你又忘了，所以你必须第一次登陆，必须去修改你的密码修改密码，用一个比较简单的命令就是out user root艾特多个house，我就把本地的root用户的密码进行修改，然后后面要跟着这样一个单词叫 identified by一个字符串，这个字符串就是你的密码随便写，我写上我的名字，这样好记不容易忘。


好，然后分号结束回车，这个密码就改好了，改好以后行不行，我试一下退出一下，然后我再重新的登录一下 my circle这块我就手动的输入，我自己写的密码没有问题，好了，好了以后这样我们游客社区这个项目我们给他建一个库，然后我们把这个项目中所需要的那些个表给它导入进来，然后一些测试数据也给它初始化好，这样后面的话我们就省事了，通过命令行导入比较方便，好，我先创建一个库 create database，那么取名就叫community。


接好了你可以看一下瘦一下。好肯定的，没有问题。我要使用这个community，我要使用这个库，然后在使用库的前提下，我要去导入建表的脚本，刚才我说的那个地方 community引力的circle，课后我会上传，然后这有三个社科文件，注意我们暂时一时半会用不上，比较靠后的位置在用。


然后 scheme点思考就是建表的脚本，这个data点circle是测试数据，我得先建表先导入，然后它的路径我得拷一下，导入的命令很简单，SARS然后后面写路径，然后写上文件名。


好，分号结束回车，他说我哪错了，可能是这个路径。左斜线才对他这块不能这样写，这样我拷过来然后再改。


那么在买sirk的模式下，你得写向左的斜线，不能写向右的斜线，然后文件名拷过来，分号回车就执行成功了，这是建了表，我们看一下这个表， show tables就这么几张表，表不多，然后表里什么数据都没有，我们还能还得导入数据，那么导入数据刚才和刚才的命令一样类似，然后只不过这个文件名要换一个换成 In it，data点server好回车，很快就导入完了，导入完以后再看一下show，tables有这么多table，我们随便的找一个表看，比如说 user表，这个表里有很多数据，当然在控制台里看，在命令行里看不太方便它都折行了，那么所以我们才需要装一个好用的客户端。


总之经过这些操作，马斯克服务端是装好了，简单能用不方便。


好，接下来我们继续再把马斯克沃本斯好用的客户端安装一下。


那么my circle本色这是一个普通的安装程序，安装它就简单多了，就是双击，然后一步一步安装就可以好。我就下一步，然后这里我改变一下存放的位置，我把它改成这个地盘 work目录之下，然后在work下我得指定一个新的文件夹，我叫my circle杠。Work best好。My circle干活本色。Ok好。然后下一步安装就可以了，下一步然后基本上就一路默认就可以了，好。安装这需要等一会儿，咱们稍等一下。


好，完成了，完成以后它就自动的给我启动了，启动以后在这个地方我们需要稍微配置一下，因为你客户端访问的是哪个服务器，他不知道你要配一下，然后右键edit，编辑一个连接，但是它默认的话就是访问的是本地local house，端口是3306，默认端口账号是root，这个没有问题，但是密码需要改，他肯定不知道密码对吧？


这个地方点这个按钮，给他设置一个密码。


好，然后 Ok这个地方是你要填上默认你要访问的是哪个库，我们要访的是游客社区库前面那天。好，然后 test测试一下，测试的时候他又让我输入密码，我再输入一遍这回 save一下，保存一下，成功了我就close就可以了。好，然后这就是我们编辑好的链接，你就点击它一下，它就启动了就进来了。


进来以后它默认这个打开了选中了 community库，然后我们可以做一些操作，这里面你看它默认了就访问了 user表有默认的一些内容，其实这是因为之前我装过，然后可能是卸载了没卸载干净，它有一些这个缓存，其实默认你打开应该是这样的，你们看到的是这样的一个界面，然后这边的大概是这样一个结构，大概第一次打开是这样一个结构。


好，然后基本上右边这个界面我不需要，下面这个界面暂时也不需要，所以我就点把它关掉，再点把下面关掉。


然后平时我们左侧不看这个界面是给管理员用的，是管理数据库的，而我们是使用，所以选然后默认选中了我们要用的库就可以了，这里贴吧展开以后能够看到我们导入的表，说明没有问题，然后这儿你右键比如说谁来可以查询一下这个表里的数据，有这么多默认数据。


好，那么经过这样的操作，我们也看到了这个表里的数据就证明安装的没有问题，然后买适合本上也可以做一些这个配置也是有必要的，那么我给你演示一下它需要配什么，它的配置是点 edit，然后 preference首选项，然后通常我会配这个字体， forms and colors，它默认的字体我忘了，这是我配过又是一个缓存的数据，就这样了我就不动了。


然后的话如果你需要你的默认的字体你不喜欢的话，你可以在这儿进行修改，我都把它改成了这个字体12号。


然后另外还有一个地方也最好配一下点 circle editor，最后它有个选项，这个选项它默认是勾上的，把它去掉，叫安全的更新。什么意思？就是说如果你勾上的话，如果你再删除数据或者是修改数据的时候，如果你没有写via条件，它是不允许你提交的，他怕你这个是忘了写外部条件，但是我们平时开发的时候经常是删掉点数据，修改点数据其实是比较随意的开发这个数据又不是正式的，为了方便还是把它勾掉，这样我们开发是省事。


好，那么到这我们 My circle的服务器，还有 my circle的客户端都已经装好了，那么课后的话你自己也安装一下。好，我们再回到 Ppt看下一页。


现在我们终于可以正式的开始学习my Betty's了，那么my Betty's首先说它的官网，它的官网的话是买白的4.22g但是它的官网主站你必须配置VPN才能访问，默认的话还访问不了，但是它的下级目录，下级路径是可以直接访问的，不用VPN，所以我把下级路径常用的给你列出来了。


 My Betty是三它目前最新的版本，那么my Betty是基本的使用的手册就看然后我们用死不用整合买卖铁丝看，所以这两个链接是我们学习的手册所在的地方。


咱们先进去看一下，我先点前面，然后稍等一下，好。


打开了 my business的手册有一点好，就是它支持中文，你可以点这切换中文，然后只有麦德斯简介，当然他这个文档写的比较简略，不是那么的这个就是不是那么的详细，不是比较粗略，然后入门后面还有配置验证文件等等，那么我们课堂上所讲的内容，从这些内容当中就是提炼出来的重点，那么这些内容我就不在课堂上给大家逐个看了。


回到PPT我们再看另外的一个链接，就是死不用整合，买不得斯的手册点进去。


好是这样一个界面，然后这里也有简体中文，那么你会发现买白铁丝也好，还有死不容易整合，买白铁丝也好，他这个手册都在买白铁丝的网站，而不是在spring。这是为什么？这是因为买卖的意思，他发版的时候晚了一步，死不应发版的时候，本来是想带着my best，但是他晚了一步就没带上。


后来的话，为了能够让spring整合自己，是他自己做了一个自己做了一个整合的方案，所以说 spring整合my best的方案是my best团队做的，而不是spring团队做的，所以这个比较奇怪，所以说它整合的技术叫my best spring，而不是叫super max，所以文档是在买是在买卖的官网，你注意。


好，这个我也不详细看了，我们课堂上也会提炼出重点给你进行讲解。


好我们再回到PPT，那么关于买卖的事我们想使用它的话，需要了解它的几个核心的组件，那么它的第一个核心组件叫circle session，factory就是circle，session的工厂是一个工厂类，用来创建SQL session，什么是circle筛选？


 Circle筛选是买卖特斯的核心组件，最核心的组件，它是用来向数据库执行circle的一个对象，就相当于 jdbc当中的 connection式的。


好，第三个它还有一个主配置文件，是一个xm二配置文件，然后在这里可以对买PETS的底层的行为做出详细的配置，比如说连接数据库的参数，比如说一些连接池相关的配置等等都在这。


那么注意我们实际开发的时候，其实这三个其实可以不用去写代码，因为我们是在spring boot的环境下去开发的，那么死不认不得。


这个环境它会自动的去初始化，factory自动的去创建succession，然后它也自动的整合了配置文件，我们可以把 xml中的配置配到 application点practice里，所以说前三个组件尽管是核心，但是都被整合了，我们在开发时其实可以不用设计，但我说说一下是希望你能对它有所了解，因为这毕竟是买卖的核心。


我们开发的时候需要主要是开发后两个组件，一个是map接口，实际上就是dao接口，那么在买卖帖子里，那么他习惯性的称dao接口，为什么什么map？


其次就是map映射器在映射器里面编写circle，这个其实就是一个文件了，我们可以用 xml实现，可以用注解实现都可以，为什么需要这样一个东西？


就是我们使用买卖点去访问数据库，我们只需要写出接口，不需要写出实现类，那么它的底层能够自动的帮我们去实现接口，前提是你要把那每个增产改查的方法所依赖的circle告诉他，否则他也不知道你要干啥。


映射器其实就是用来编写它所依赖的circle，然后映射器里不只是有circle，那么你circle是查询到了数据或者是向数据库提交数据的时候，那么这个circle需要和我们 Java中的实体类做一个对应关系，你比如说我查到了数据库里的结果，我得用一个类去封装，我查的user表，我得用user类去封装，因为这表里有 ID字段，有内部字段，我这个内容也得有ID属性，内部属性它得一一匹配，对吧？


所以说映射器也要体现circle以及实体类之间的一个对应关系，就是这样的。好了，大概是这样。那么我们写几个例子来看，这个就非常的清楚，那么接下来我就使用my business，咱们对用户表进行一个增删改查的操作， Crud的操作。因为用户表可以说是我们刚才所导入的那些表中基本上是最简单，也是最容易理解的表了。


好，那么说到这，我们先去详细的看一下用户表它里面都有什么字段，把这个表搞明白以后，我们再去做这样的一个操作，这块我们可以直接用 word本上去看。


刚才我们也看了这个数据，我们再仔细看一下，首先它有ID不用说的主键，然后是uz name就是用户名就是账号，password是密码，注意这个密码是经过加密的，然后后面这个sought叫盐，这个是个什么东西？


为了防止用户的密码过于简单，虽然说我们对用户的密码进行了加密，但如果你的密码太简单的话，也能够被破解，比如说你就搞一个简单的123456这样的密码，也是很容易被破解的，为了防止这种情况出现怎么办？


那么我们会在用户的密码的后面拼1个随机字符串，5位拼上以后，对拼好了，随机字符串的密码再加密，这个就不容易被破解了。


所以后面这个sort就是随机的字符串。当然我这里是手写的，其实在程序当中应该是随机生成的，就这样的。这个叫盐，我们给密码加点料，让它有趣一点，有味道一点，大概是这样一个感觉。


后面的话是邮箱不说了，tat是用户的类型，0代表的是普通用户，一是管理员，二是版主，status是用户的状态，那么零代表是没有激活，一然后 activation code是激活码，后边的hide URL是用户头像的图片的访问路径，create time是这个数据的创建时间，也就是用户注册的时间，因为注册是在创建用户，是这样的。


好，总之这个表其实很容易理解，主要是 Type和status，可能你不理解它01代表什么含义，你记不住也没关系，你在这点 I它可以打开一个建表的 ddl语句，这个语句中有注释，说0代表什么意思，一代表什么意思，二代表什么意思，你可以详细的看每个字段是什么类型，有什么约束都可以在这里看到。


好了，这个表我们就了解到这，下面我们就写代码对这个表进行一个征迁改革的操作。那么在写代码之前，我们还得做另外一件事，咱们得把包导进来对吧？我们的项目中还没有买SQL的包，还没有买卖s我就打开这个没问题，抛弃特瑞斯打开这个网址，然后去搜索扎包。好，然后我要说的是my circle，因为我们需要依赖于my circle。


然后就因为你看它的使用者仍然比别的多，就 My circle connect接好点进去，然后我们选择最高的版本8.0.16点进去，然后我们选的是每本的配置，我不要注释这句话，我可以把勾去掉，你没有注释，然后把这段代码拷贝一下，粘贴到我们的项目中的pome的xml当中来。我放到后面去站到后面去在这儿，好，然后 Anybody out to commit凹凸import允许它自动下载自动去导入。稍等一下，等它颜色变成白色就是下载好了。


好，然后再回到刚才这个网址，刚才这个网址我们从没问的专库去搜包的一个网址， maven reporter.com你最好记住，其实搜索没问的包不只是这一个网站可以搜，其实别的网站也可以搜，包括阿里云，但是这个网站是比较好用的，因为它有对包的一个使用量的一个排名，你比较容易知道哪个包是比较热门的，也是便于我们去选择我要用哪个包。好除了买SQL以外，我再搜一下 my best搜一下，你看他有单独使用买威特斯的包，有spring整合买威特斯的包，有spring boot，整合买卖特斯的包，我们就用这个，因为我们用的是spring boot的框架，你用spring boot的包肯定是它就更简单了，它就有自动的配置了对吧？


点这个买卖的是不是不得是大特，然后还是我选择最高的版本，然后 Mabon把 copy一下，粘贴到pom的xml当中来，也是需要稍等，下载完了那么包就处理完了，包处理完以后，那么我们还要对数据库，还要对买卖点是做一点配置，因为即便是simple的它能自动配置，他也不知道你连的数据库的路径是什么，账号密码是什么，对吧？


你希望启动的最大连接是什么等等这些他不知道，这必须得自己配，没有办法。


好，那么在sprayboard的整合下，我们就不用创建买卖dace的 xml文件了，直接在application process里配就行，我就在这里进行配置，买circle还有买卖点他们的配置比较多，当然你从spring boot的官方手册附录里能够找到它的配置的模板，我课上就不挨个去给大家找了，因为太多了比较麻烦。


我就直接从我之前配置好的代码中把它拷过来，然后需要改的地方再改一改，给大家介绍一下每一块是什么意思，课后的话你配的时候也可以直接把我这段配置贴过去加以修改就可以。


当然如果你想了解更多更详细的配置，可以去查阅手册，可以自己去看一下。好，我就打开找到我之前的配置文件，在这。好，我把它打开这一段，然后我把它复制一下，粘贴到我的现在的项目中来。那么第一段配的是马赛克数据库以及连接池，这一起配了后面配的是my business。什么叫连接池？连接池也叫数据源，它是能够统一管理连接的一个工厂，然后它的作用是它能够统一的去初始化一批连接，让你反复使用，能够让人家复用，这样效率高。


第二个它能够管理连接的上线，比如说上线我这里配的是15个，那么如果超过15个请求，第十六个第十七个你要等待，这样的话避免了我这个数据库由于过多的人次访问他瘫痪，避免这种情况出现，所以说我们的访问数据库是一定要使用连接池的。


好，那么关于数据库的连接是4前4项，第一个是数据库的驱动， My circle的驱动是从my circle的官方手册可以查到，然后第二个是my circle的连接的路径，是这样写固定的格式，jdbc固定的，马赛克固定的，然后是IP地址端口号，根据自己实际情况写。


但其实你在本地装也就是这样。后面的是库名，我刚才建的库不叫community，就这样写。后面是一些参数 cap in coding，编码utf8支持中文，use SSL force就是不启用安全连接，还有 server time中，服务器的时区设置为中国的一个时区，香港，好，然后后面跟着的是账号密码，根据你的情况去改。


再往后是连接池的配置，这个是连接池的类型就是类，那么连接池其实有很多产品，那么 spring boot它内置了多个连接池，这个是性能最好的，所以我们选择一个性能最好的就可以了。


然后这个配置是连接池的最大连接数，我这里因为是个人电脑不适合搞得太多，15个就够了。


然后是最小空闲连接，比如说刚刚一大波请求来了，连接都被用了，现在一大步请求走了，连接都空闲了，那么需要回收几个关闭几个，保留少量的几个就够，那么保留几个5个，然后这个都太冒超时间，那么他的意思是我不能说连接空闲了，我立刻就把它关掉，我需要等多久看它还空闲着，我才把它关掉，3万毫秒。


好，以上是连接池相关的配置，然后这个是my Betty's的配置，第一项配的是 map的case，就是映射文件的存放位置， xml Cirque的文件的位置，我们通常会这样，我通常都会把配置文件放到resource下面，我会在这建一个目录叫map，然后 map的目录为什么选class pass？


因为你一编译以后 map就会被编译到target，classics下面就像style timeless applications放的地方一样，那么这个classes就是class pass类路径，所以说 class pass指的是 class文件夹，map，然后它里面的文件都以xm结尾星点 xml，这个是指定你的，你不是有表吗？


我们需要通过类用类，用实体类去封装表里的数据。那么这个要声明尸体类所在的包的包名，当然这个包我还没见我见一下。


在这创建一个实体类，用于存放实体类的包anti，好将来我就会在类之下创建在这个包下创建实体类，用来封装某一张表的数据，那么我们做了这项配置以后，那么在配置文件里引用实体类的时候就不用写它的包名了，这样就省事了。


这一项是启用自动生成组件，我们insert的时候 ID是自增长的，我要启用一下才能支持。


然后这个是什么意思解释一下。咱们那个表它是不区分字段，是不区分大小写的，然后一般我们字段是这样命名的，比如说 PAD URL好，我们建一个实体类与表对应，实体类的有属性和字段对应属性，我们通常是驼峰式命名，这样的字段和属性名是不一样的，但是有规律的。


那么这个选项设置为树的意思是让下划线的命名方式和驼峰的命名方式二者能够匹自动匹配起来。我们让表里的字段和类中的属性去匹配，就可以达到一个自动的状态，就不用我们挨个去去设置，这样就方便了。那么以上是数据源，还有买卖TS相关的配置，这么多我们写好以后就可以直接在这基础上做下一步的开发了。


好，现在我们包也导入了，配置文件也配好了，接下来我们终于可以开始写正式的代码，然后去访问优则表里的数据了，对优则表进行一个增删改查的操作了。


好，我们要仿这个表，首先要写的是实体类，因为你需要有一个类能够封装表里的数据，然后我们才好对它进行操作。


好，所以我在安推的包下，新建一个类取名叫user和user表相对应，然后根据表里的字段，我这里有多少个字段，我有与之对应的多少个属性，只不过我的属性名是按照驼峰式命名的方式来命名的。


好，刚才我们也看了，首先它有ID整数，其次它有 User name、用户名，然后有密码有这字符串有言也是一个字符串 sort，然后还有邮箱 EMAIL，它还有太了就是类型以及状态，然后还有激活码，activity code，还有拍的 URL就是头像的防路径，好。


最后还有一个是日期类型，叫create，看就是这个用户他注册的时间，这条数据的创建的时间。


好写完属性了以后，你要给他提供相应的盖特赛的方法，你可以按快捷键就是out加 insert它会弹出一个框，这里面你选get on the set，然后勾选上，你要生成 set的这些属性都选上。 Ok，最后我再给它生成一个toss卷，也是out加insert的快捷键。 To，spin给它生成一个to spin方法，这样我们打印对象去看这个数据的时候会比较方便一点。


好了，那么实体类很方便，没什么逻辑性，就是很简单的就写完了，写完以后我们要访问数据库，我们需要在do这一层写一个组件，那么买卖这次开发，我们管数据访问组件叫map，通常命名为什么map？


而且它只需要写接口，不用你写实现类，因此我这创建一个优点，map是接口， ok好。


另外我们需要加一个注解才能够让 space容器装配，这个并按理说 dao层你应该用repulsive，Terry实际上你用注解是可以的，但是买白铁丝也有一个注解来标识这个病买白铁丝的注解叫 matter，我一般习惯于用因为毕竟这个单词的简短对吧？


它简洁就用这个，然后我们需要在 map里声明一些增强改造的方法，然后再给它写上对应的 circle的配置文件就搞定了，那么这个方法我就按照我们后面这个业务中需要的来写，我需要什么我就写什么，然后这样的话我们 user map写完以后，现在就可以直接用了，我们到后面的阶段的时候就能省点事儿。


好后面首先我要用的是根据ID查询用户的一个方法，那么我就这样写， select by ID，根据ID查询的是user得到一个user，那么参数就是ID，好再来，另外我们还会用到根据用户名查user用户名是唯一的，所以也能查到一个user select by name。那么参数就是邮政内容，还会用到根据邮箱查邮政 user select by EMAIL那参数就是EMAIL。说白了这三个方法都是查询，而且逻辑都相似。


其实我们会写一个，其他两个肯定就会然后我们后面还会就增加一个用户，然后返回一个整数，返回的是你插入的数据的行数，你成功其实就一行，换个名我叫insert user，然后参数是整个user所包含的数据，应该是用user对象加以封装的，对吧？然后后面我们还需要对user做修改，修改了它的状态，update status返回的是什么？是修改的条数，修改了几行数据，那么修改的话你得有修改的条件，我们通常是以ID为条件，然后改的是状态，所以你要把最新的状态传入进来。


还有后面还需要 update head，更新头像，更新头像的路径，也是跟上面这个类似，以ID为条件，然后参数是high点，URL Url是路径的意思，好再来还要更新密码，那么条件是ID参数是最新的密码。好了，这些方法是我们后面开发的过程中需要用到的一些方法，我在这提前把它先正好利用这个案例就把它实现后面好用，这样比较方便。好了，这个方法其实也很容易理解。根据ID查询，根据内容上根据修改什么东西也很直观了对吧？但逻辑上并不难理解，那么麦克就这样就写完就可以了，生命好就可以。


那么要想实现它，我们需要给他提供一个配置文件，那么配置文件里需要给每一个方法提供他所需要的circle，然后这样的话买卖的底层会自动的帮我们生成一个实现类。


好，那么我就在map这个目录下创建一个xml文件，创建一个 xml文件，这个文件其实你叫什么名字都可以，我叫user杠mica点x ml，那么这个文件的结构，咱们从买MAC的官网是可以把它找到的，我们去找一下，因为这个东西我没有办法去手写，记不住好。


我们再打开一下 my circle的官网是my business的官网， my business3.5.1，那么在入门这块就能找到，这块就能找到，这个是主配的文件，我们把它省略了，我们用的是application的practice，这个就是他map映射的配置文件，我整个copy一下，然后把它粘过来，就是这样一个结构。


里边的内容我先删掉，一会我重新写。 Xml文件它的根是mapper，然后 namespace这块有说法，这个地方写什么？写user map的权限命名，因为你这个配置文件是为哪个map服务的，要在这里体现，不然的话它跟哪个map对应起来不知道对吧？所以这里面写的是 Map的权限的名 com点，脑壳的点儿肯定的，点儿deo点儿，又在迈克尔这块一定要写清楚好。


然后在迈克尔之内我们需要写出各种各样的标签，每一个标签要对应一个接口中的方法好，很简单，如果是查询方法，你要写一个谁来给的标签里边写上circle，如果是增加数据，你要写一个音色的标签，写上音色的circle，然后 update的标签，得力的标签，我们这里没有得力的，但是你明白了，insert、update、delete其实也很容易理解，好我就写了。


首先我要实现 select by ID的方法，我就需要写一个c lack的标签来实现一个查询的circle。


然后他报错了，你要加上一个ID，这个ID又有说法，就是ID要写什么呢？要写它所对应的方法的名儿，方法名儿不叫写来给他办ID吗？这样的话买卖的就知道， circle是为那个方法服务的，是为了实现这个方法服务的，就有了一个对应关系，你要这样写。


好say let by ID，然后还需要声明result type，那你是一个查询，你查询以后你返回的是什么类型，你要声明，不然的话他不知道你要返回什么类型。我这里写优点，按理说你得写全限定名，com点脑壳点什么？带上包名，但因为刚才的配置文件里写了这段话，你告诉他你的市值率会放到哪里，所以前面的报名就可以省略了，直接写user就可以了。


好，然后我在这里面就写上查询的语句就很简单了。


See like ID啊然后等等，你要把他的各个字段都列举出来，那么养成习惯尽量不要写谁来给他牺牲，一个字段写邮政内容，它是word sat，EMAIL tat，当然写这个，因为他没有检查说你的单词对不对，其实挺容易写错的，所以说你写的时候谨慎一点，尽量的把它写对了。


Activity扣的 hide URL以及create time。我要查询这些字段，然后 From user表where我们是以ID为条件来查询， ID等于 ID等于应该等于谁？等于这个参数对吧？我怎么引用这个参数这样写？井号大括号 ID，你注意我们前面所写的这字段，这是表，这是字段，而井号ID意思是我要引用这个方法的参数名为ID，这样的话就把参数嵌入到 Circle里去了，就这样这就可以了。同理不是还有两个查询语句和它类似，我可以就复制了 Copy。


第二个是select by name，反馈类型也是一样，查询语句也一样，就条件不一样， name不是name，user name等于user name。好，这是第二个查询语句。再来一个。


第三个，select by EMAIL。其他都一样，这个地方EMAIL等于 EMAIL。好，查询就完成了。完成以后你会发现有的地方有点麻，有点问题，就什么呢？我们写字段这个地方挺麻烦的，尽管说我后面是copy的，但是你想一想，万一说将来有一天要加一个字段加两个字段，你这得改这得改三个地方对吧？不合适。


怎么能够把提炼出来，让它能够复用，其实提炼可以这样，就是circle你可以在前面专门定义一个circle，然后给它取一个ID，便于引用，这个ID我叫谁来 feels就查询的字段把它拷过来，这是我要查询的字段，然后我就可以这个地方就可以用 Circle来替换，这地方可以改一下，改成什么呢？改成叫做 include，然后引用的ID。写上 select feels比如说我这个地方引用的是这段搜狗，好，这样的话就让麻烦的东西能够复用了，这也是这么改，这也是这样去改。


那么查询语句搞定，接下来我们再来处理那些个增加修改的语句增加，你要写一个insert，也要写ID，也要和方法名对应， insert user。


好，然后还要写上就是说你增加的时候有一个参数，这个参数你要声明好，这是个什么类型的参数，需要做一个声明。


当然了，如果说是这种简单的参数就不用如果是一种复杂的参数，是一个bin就需要声明，因为它默认它识别不了这个东西，它不是 Java自带的类型，你要声明，说明参数类型是用 primary type，那类型显然就是user对吧？


好，然后还要写上一个属性在增加的时候叫key property。你要告诉他你的 ID的字段对应的属性，就邮件内容与ID组件对应的属性名是什么？就是ID， key property等于ID。为什么要做这样的配置？因为增加的时候，那么 My circle它的底层会自动生成ID，生成ID以后，那么买卖的时候会从买色中得到 ID，然后填入 user里，我们增加的时候 user的ID是没有的，增加以后就有了。


这个ID是买卖点是从数据库获取到，然后给你回填进来的，他得知道你属性是谁，所以要做这样一个声明。


好，然后这里边我们要写一个insert语句了， insert into user，后面你要写上字段，这里不要写ID，因为ID是自动生成的，其他的要写要写字段了，我们其实可以想办法再让字段再复用一次，可以这样的， SQL ID等于insert feels我再定义一个共享的circle，那这个insert语句的字段，然后把拷过来，这样只有只是他没有ID而已，然后那么我这儿就是要引用音色的feels，也是用这个音刻录的。


Refid等于insert是有。看看有没有写错，没有问题。好，这是插入的表里，要插入这些字段，对应的值从哪来？对应的值是从你这个参数user里来，这里面你要引用参数，还是用井号大括号的方式，然后这里边写什么？


写 user里面属性名，user、name属性，然后它是word属性，然后是 sort，反正就慢慢写一个写 EMAIL，太太使得的是然后是ak为人透的，注意这个是属性，我们user中的属性是驼峰式命名，不是下划线，这块要注意好，继续，然后是黑的 URL最后还有一个是create time。


好，就这样了，那么因为设成语句我们就写好了，我再数一下字段的对不对？ Use name，password，sort，EMAIL，status，I given code。Hide URL，create time。应该没错，好，这是insert，然后还有update，三个update其实就比较简单了，因为它的参数少不对的。


Id对应方法，名update status，然后它是一个简单的类型的参数，你可以简单类型参数可以不用声明，然后你像 insert也好，还是update也好，其实它返回的都是整数固定的，所以你不用声明查询，需要声明返回的类型，而往往的音色搭配的需要声明参数类型，但因为我们这个update只是改了一个字段，参数比较简单，类型也不用声明。


好在这里我就写了update，优点赛特斯特尔斯等于参数斯特尔斯 where条件 ID等于参数里边的ID。另外的两个update和相似， Update header那就是site，header，URL，注意这是字段等于参数， either URL然后条件依然是ID。好，最后还有一个复制一下update password，然后 set password等于password，然后条件还是ID。好了，到这儿我们就把映射文件编写好了。当然这是因为我事先把我们后面的课程中要用到的方法都列出来了，我们一起去实现，有点有点这个时间长有点麻烦，不过好在后面就简单了。


那么实际开发的时候，比如说你要如果说我们先开发一个方法，两个方法，可能就快很多。好，那么写完以后咱们得测试一下，看这个东西可不可用，对不对？那么我直接写一个测试类，在测试类中对它进行测试，那么我在这个包下我新建一个类，不用原来的类了，新建一个因为都写到一起去有点乱，map test这个类的注解和之前的测试类也是一样的，我把它拷一下粘贴过来，然后在这里面我要测的是麦克对吧？所以我要把麦克注入进来 as well。Private user my phone注入进来，然后我们把查询新增修改分别加以测试。


那么首先我先测一下，查询 Select user，测试查询user，先根据ID查，我们得看一看有什么数据，看一下数据，比如说我要查这条数据，刘备ID是101就查他了，那就是user map点select by ID101，返回的是user类型的对象，然后我直接把它输出来看一下，看行不行？好，那么我就执行这个方法。好，执行完以后它是勾表示是对了结果对不对？你看 ID 101 u the name刘备，password什么？没错不用细看看。两个就知道了。同理我们再测一下，比如说根据用户名查，用户名是刘备。我再来一遍user。等于user map点。Select by name刘备。然后打印user再把也撤了。User map点起来把EMAIL刘备的邮箱是什么？看一下就瞎写的，就用它来查，按照邮箱的来查，查完以后也打印悠着，我就这三个查询就一个方案一起测了，然后再执行一下这个方法。


对了，看结果查到的结果都一样，因为我们就是查刘备没有问题，下面我们再来测一下增加的方法，我再写一个测试方法， Test，insert user，那么你要增加的话，我们需要给那个方法传的是一个优质对象，你提前要把优质对象构建好，里边的数据封装进去，你就实力画一个u字， ID不用传，因为数据库会自动生成user点site，user name，用户名要写，比如说用户名叫test测试，然后 user点site，它是word，我这里就不加密了，就直接写一个直观的123456，user点site sort在这个sound是ABC随便写了 user点site，EMAIL，比如说test QQ.com，悠着点site，either ul当然还有 tag，还有 status，那两个整数，如果你不传的话默认都是0，那就默认值，我就不修改了。


然后头像的路径，咱们优客网有默认的头像，它的路径是这样的，HTTP冒号，双斜线、三w点，now code.com，然后斜线是一个数字，然后点拼劲，比如101瓶颈，这个数字是从0~1000，超过这个范围小于0或大于1000就不对了，一共是0~1000这么多个图片。


好，再site一下，创建的时间就当天时间，好，终于构造好了 user我就要insert了它，返回的是插入几行行数，又在卖票点，音色的优质又在传入，传入以后我们打印一下 rose，另外我再打印一下悠着点get ID，看这个ID有没有生成。


好，那么写完以后运行一下，好看结果一行 ID生成的是150，数据库里有没有这个数据，咱们再查一遍，执行一下 circle。


后面150test没问题，这是一个测试的数据，好了，这是新增，最后再测一下修改，那么修改的话，一个是修改这个状态，修改路径，修改密码我就改刚才的数据 test就改它了，就user map点儿不对的 study的状态，他的ID是150，状态默认是0，你看一下，默认是0对吧？


比如说我要把它改成一一表示激活态，返回的是修改的行数我会打印这个行数，好我再把直接再把那两个也改了。 Rose等于user map点update还得150。


原来的路径是101，我比如说把它改成102，你看刚才的库里是不是101，咱们确认一下101没错，然后就这样没错，101。好回来这是改了头像，改完以后再打印返回结果rose，然后还可以改密码，他的密码原来是123456对吧？我改一下给他150，最后把它改成hello的。打印一下，rose。好，那么洗完以后执行一遍。好，然后看结果，结果都是一就表示说他都是改了一行，每次改的数据对不对？我们再去查询这个数据库，看一下。


Hello密码改成hello没问题对吧？然后状态改成了一没问题，路径改成药量也没有问题，那么经过测试我们就了解了我们写的程序还是ok的，然后大致的买白铁丝的用法你也就明白了，课后的话多练一练，把这个套路记住，我们后面的项目中会频繁的使用，然后会再加强练习。


好，最后再补充一下关于 My best的调试的方式，因为 myce其实你写代码的时候很容易把它写错了，尤其是 map的xml， Java类还好说，因为写错以后它会编译，会有提示，但是 map配置文件这里边的表名字段名或者是这些个key写错了，它没有任何提示，那么我们怎么去调试比较好，我们可以把 dao这一层的日志级别调为比较低的级别debug，然后控制台会打印出更多的信息，它会打印出 circle，所以你不管哪写错了，最终影响的是circle，如果你看到circle以后看这个circle对不对？


它错在哪？你就容易排错了。


好，那么当然了日志是怎么回事，日志级别是怎么回事，我们后面会详细讲，我们现在启动一下，便于你调试。我打开配置文件在这写了。写配的是日志 Logo，写个注释，然后我写老给点儿level点儿com点儿，然后扣点儿点，看没有那天。这样我就直接把我们的代码的日级别都设置为第八个，自然也包括do包。


这句话的意思就是说把这个包的级别调为第八个，也包括了deo好，写完以后我再回到这个测试类，这回我执行这个查询运行一下看有什么变化没有，我看一下，你看这回控制台不只是打印了，查询结果在每一个查询结果之前，它打印了本次查询它所执行的circle，图片预编译的circle，然后 circle的参数是多少，最终返回的数量是几，查到了几条数据是这样的，所以说你根据看这个蛇口看这个参数，看这个结果的提示，那么就便于你去调试了。


好了，以上就是买bad使用方式以及调试的一些技巧，那么我们这节课就讲到这里，咱们下次课再见。