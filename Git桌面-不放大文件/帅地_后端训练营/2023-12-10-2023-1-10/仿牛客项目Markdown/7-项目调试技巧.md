7-项目调试技巧.mp4

说话人1 00:03
这次课我给大家讲解一下项目的调试技巧，因为咱们已经学会了第一个首页的功能，那么你在自己课后开发的时候，我想肯定会遇到各种各样的问题。那么经过这次课我们讲解调试技巧，你课后把它运用到你的开发当中去，那么一个它能够帮你解决问题，能够让你把功能调出来。


第二个，不管是首页的功能还是以后的其他的功能，你都要反复的去练习这些技巧，然后逐渐的把自己的独立解决问题的能力锻炼出来。


那么其实企业很关心的你能不能解决问题，这一点在你就业的工作的时候，它体现的尤为明显，所以说这方面是很重要的，一方面大家要多去运用多去锻炼。


那么这次课我们讲调试技巧主要是从4个方面来进行讲解。第一个方面就是说首先我们了解响应状态码的各种含义，因为我们通过浏览器向服务器发送了一个请求，那么这个请求回来他得到的是什么信息？


我们通过状态码其实大概能有一个判定，这次请求是成功了还是失败了，能看出来再一个如果是失败了，这个错误是发生在服务端还是客户端也能够判断出来，这样的话我们通过状态码能够大概的判定一下这个问题的所在。


然后判定出问题的所在以后，如果是也是服务端的问题，我们可以在服务端进行断点调试。如果是客户端的问题，我们也可以在客户端进行断点调试。


当然了，那么不光是断点调试，我们在断点调试之前，或者是在调试的过程中，也可以结合着日志，然后去跟踪这个程序去找到你问题的所在，所以说我们这次课主要是讲这4个方面的内容。


第一个咱们先来了解一下响应状态码的含义，这个我们可以通过 Http协议它的手册上面有介绍，我们可以看一下，好我打开浏览器，这个网站莫罪了，网站上次课之前我给你介绍过，然后我们要看的是这部分内容 HTTP状态的返回码，好点进去，然后他这个状态码有好多，咱们课上就不一个的去解释了。


然后我解释一下比较常见的这个状态码，基本上我们写的程序可能百分之90都是这么几种状态码，其他的如果说你在开发的过程中遇到了不常见的，你自己来查一些手册，看一看大概是什么意思，然后如果说你查手册，他可能是有的地方说的不是那么的详尽，你觉得不够详细，你可以在百度搜一下这个状态码是什么意思，那也会有人遇到类似的问题会给一些参考的意见。


那么我们平时最常见的第一个状态码是200，其实以二开头的都表示成功了，那么200 200就表示请求成功，然后成功了没什么可说的，就这个程序基本上应该是没有问题的。


好。


然后其次我们经常看到的是302以3开头的都代表着是重庆巷，那么302是我们最常见的崇明巷的一种形式，当然我们还没有去介绍什么是重名项，借这个机会给大家讲一下什么重名项，然后后面的功能里我们会经常会用到要说这个成像，我需要简单的画个图，假设这个是浏览器，我写上假设代表的是服务器，二者之间要产生通信，比如说我服务器一有两个功能，我已经开发好了两个功能，一个是我要删除什么？


一个删除的功能，比如说删除一个帖子，然后比如说我还有一个这个查询的功能显示，所有的帖子这两个功能它都部署在服务器上，我们浏览器都可以进行访问，比如说我访问的是删除的功能，那么他把数据给我删掉了，删掉以后他应该给客户端什么响应呢？


给他反馈什么数据，我们的项目中大部分的请求返回的都是网页，而你把数据删掉，你返回什么页面呢？


所以说其实这种情况其实我们应该是返回的，是查询的数据，因为把数据删掉以后，我返回的是那个列表页面，你一看数据没了，查询是删除是成功的，你很确定很直观，所以说我要返回的其实是查询功能能够返回的页面。


当然我们可以这样做，说我删除在删除功能里我去调查询，然后让查询返回查询页面，一客户端的一看那数据没了，ok这是可以的，但是这种情况是一个不好的编码方式，因为咱们的查询功能和删除功能其实是两个彼此相互独立的功能，它俩之间其实不应该产生依赖，而你这样去调他就产生了依赖。


那么一旦功能变得复杂的时候，一旦或者是业务发生变化的时候，有可能你给他就要牵扯到他，那么这是一种不太合适的方式，那么我们利用重立项就是能够很好地解决这个问题。


所谓的重叠性就是我这种情况下我删除功能可以给浏览器做一个响应，但这个响应里其实我不给他返回什么网页，而是给他返回一个建议，首先状态码给的是302，浏览器一看是302就知道了说你并不想给我返回什么网页，而是建议我去访问另外的一个功能。


那么返回的响应里还会带上一个就是一个地址，一个网址，我用location来代表，除了302之外还会带一个建议你访问的目标，那么浏览器根据你给我的路径，他就会去访问，自主的去访问他，应该访问功能，比如说查询，然后查询给他返回一个列表的页面，是这样的一个过程。


所以其实302是这样一种感觉，就是说我功能结束以后，其实我没有什么能够给予你的，但是我给你一个建议，你可以访问另外的一个功能，然后的话它能够给你很好的一个数据的展示，就是这样，你看这个最终也是调了删除的功能，但是不是通过也调了查询的功能，但是不是是通过客户端去调的，而客户端是发两次请求去调，他们这两次请求是彼此独立的，所以说这俩功能没有产生耦合，这就是重定向的一个价值。


然后我们项目中比较常见的地方，举个例子，比如说我要注册一个账号，我注册完以后注册完了，我去哪个页面再回到注册页面也不合适，对吧？你就可以直接跳到登录页面，这个时候就可以进行重定向，因为注册和登录彼此是互相独立的对吧？它们之间不要产生耦合，就可以用这种方式去做一个跳转。


总之就是重定向，它是能够以一个非常低的耦合的方式进行一个功能之间的跳转，那么后面实际的案例中我们再去演示，反正大概大家先对他有一个了解。


好，我再回到这个页面，网页那么所以302代表是这样一个含义，能够让浏览器自主的再发一次请求，实现一个功能的跳转这样的一个功能。


好，这302我们也很常见，有的时候我们可能会看到以4开头的状态码，这个时候以4开头的状态码就表示说有错误了，我们最常见的是404，我想可能大家平时上网的时候也会经常见到这个状态，404代表的是我下6下服务器发出请求，我要访问的功能不存在，这个不存在，它往往是因为我们写路径写错了，你在地址栏写路径写错了，或者是你在超链接上写的链接写错了，或者是你这个表单上，你写的路径写错了等等，往往就是我们路径配错了，所以你要检查你页面上的路径写的是否正确，这是一种比较常见的状态码。


好，再往后看，然后还有15开头的状态码，最常见的是500，那15开头表示这个服务器接收到了你的请求，但是服务器在处理的过程中它发生了问题，发生了错误，所以遇到这种情况，我们应该去检查服务端的程序，大概是这个意思。


好了，总之我们最常见的几种状态码，一个是200表示成功了，一个是302表示要跳转要重新下，一个是404表示说我的路径很可能不对，所以找不到服务器的资源，一个是500表示服务器在处理的过程中发生了问题，那么我们需要去跟踪服务端的代码，好再回到 Ppt，所以我们通过这个状态码就能够大概的猜测到这个问题，它到底是我客户端路径写错了，还是服务端处理的程序写错了，然后我好去有针对性的去调对吧？


这是一方面。


如果说具体来说应该是服务端的问题，我怎么去调呢？如果是客户端的问题我怎么去调？其实我们的开发工具它都支持我们在程序当中打断点，然后你程序在运行的时候能卡在断点的位置，然后我们可以逐行向下执行，以慢动作的形式向下执行，这样的话你可以很好的跟踪程序，然后哪一步你发现他执行的和我预期的不一样，或者是哪一步他得到的数据不是我说我想要的，可能就是出现了问题，我就可以根据来进行排错。


好，下面我把服务端和客户端这两种调试技巧给你演示一下，怎么打断点给你演示一下。我先打开这个 Idea，然后我就以上次课我们所写的首页的功能，来给大家演示一下这个断点调试的方式。


比如说假设我发现服务端程序它就出了问题，这个结果不对或者是报错了，我想跟踪一下程序，你可以在这个方法的第一行方法内部，你不要把断点打到方法之外，因为他调的是这个方法，只是从这一行开始执行程序，你可以在这打。


当然如果你确认这两行没有问题，你在这打断点直接在这打，也可以那程序就卡在这儿，比如说我想从头开始在这打个断点，然后如果说你想让程序卡在这儿，那么你在启动的时候还需要以debug模式启动程序，而不是普通的rap，怎么以debug模式启动程序，比如说你选择这个类右键debug就可以了，不点转点 debug叫虫子，或者是在这儿选中这个类，然后点图标也是ok的。好，我就点一下把这个服务启动起来，服务启动好了，为什么没有卡到这个地方？因为只是启动服务而已，我们还没有访问这个功能对不对？


只有你访问的时候它才会它在执行的过程中走到这儿才会卡住，好吧，我们再打开浏览器，我去访问一下这个功能 Local house，community index，好，你执行你会发现浏览器一直在这楼顶它不结束，因为什么？因为我们服务器的程序卡住了，就卡在了断点的这一行，然后我们要跟踪程序，有的时候可能是让程序往下走一行，看一看有没有问题，有的时候是要进入到当前行的某一个方法的内部，看有没有问题，你就需要掌握一些快捷键，当然你点其实点可以这几个按钮，也就是我们快捷键其实就是操作这几个按钮，这个按钮比较多，比较常用的其实就三个，我直我就直接说快捷键了。


首先如果说你想让程序向下执行一行，你就按这个f8，你看它就向下执行了一行，你再按f8他又执行一行。


所以f8的意思是让程序就是逐行的向下去执行，然后比如说到这行了，我想进入到这一行的方法内部去看一下，你就按这个f7 F7是进入到当前行所调的方法内部， f7你看我们当年好像不是掉了，get outside，所以说就走到这里来了，我一看好像没有什么问题，我就 f8过去刚开始是进入到了 get offset，然后你站f7他就进到了get limit，然后站f8，又回到了这一行，然后再f7就进到了这个方案的方法内部就是这样的。


然后当我们这个程序走到某一行的时候，其实我们可以看到这一行代码之前变量的值或者是参数的值，你比如说在这个范围之内，我可以很容易地看到这个参数 uzid它后面写出来了等于0，offset等于0，limit等于10，你能够看到这个参数的值对不对？或者是你鼠标悬停到参数的上方或者是变量的上方，它也会有一个提示很方便。好，我这f8又回到这儿，然后在f8就走下去，然后一一行走。


好了，然后跟踪到这儿的时候，可能我们就再往下就跟到了循环的内部，这个循环如果说它只循环10次，你一次跟可能还好一点，如果是循环100次1000次，你一次跟就太麻烦了。


如果说你想我这个for循环好像没有什么问题，我不想跟了，我想直接走到这儿来，你可以在这一行打个断点打断点了，没了点一下就打断点了，打个断点。


然后我希望我这儿不是逐行去跟了，而是直接跳到这儿，你就按快捷键f9，f9的意思是程序直接向下执行，直到执行到下一个断点为止，如果下面没有断点就直接到执行到底了，就执行到结束的，你看就卡在这了。


如果我再按f9整个程序就执行完了，我们打开浏览器就看到了这个结果。


当然了我们通过打断点逐行跟踪的方式，你可以一一行跟踪你的程序，看一看它执行的顺序和我们编码时所预期的那个样子是不是一样的，是不是走偏了，这一个看程序执行的路径对不对？这是一方面。


第二个在每一步，比如说在这一步，我可以看到这一步之前的变量，比如说配置对不对？好，我们再演示一下，我刷新一下，回来我要看配置对不对？但这配置它显示的是一个地址，希克的看不到内部的情况，你想看的话其实也很方便，在这儿 where boss变量这里有配置，展开看这里有相关的值，还有 model，你看这个model你可以展开看，你看model里边是不是就已经有了配置，所以上次课我就提到过，我说这个是不是mvc在调这个方法的时候，它会自动的实例化model和配置，然后将配置注入给model，所以我们在这儿就能够从mode中得到配置的数据了，在后面的页面当中自然也可以得到你从这就可以印证一下，因为你一看model里确实有配置，已经装进去了。


好，所以你利用断点也可以很容易的看到它每一步之前执行过的程序当中变量的值对不对？也能够帮助你去排除一些问题。好了，那么就这么几个快捷键，大家把它练熟了，多一跟就好了。再一个如果说我们程序中就到处打了断点，比如这打了断点，这打的断点，然后这打的断点，可能是你掉到service里你也打了断点，也可能是你掉的配置里你也感到动力。


我们在跟踪的过程中，可能我到处打了好多断点，然后那么我跟踪完了，排除完这个问题了，我想把断点去掉，你一个点肯定是很麻烦的，其实 idea它可以统一的帮我们去管理所有的端点，那么管理端点的功能是点通过点这个按钮弹出个界面，那么在界面上你能看到这个你曾经打过的所有断点，然后你点击一下就能切换到断点代码所在的位置，在这能看到切换可以切换，然后如果说我暂时比如说配置里的端点，我想不想把它删掉，但是我想让它不可用，你可以把这个勾去掉，它就变成空心的了，这个时候就表示不可用，但你想恢复的话再勾上就可用了。


好，如果说你想把断点删除，你可以选中若干个断点，然后你是右键删除或者是delete就没了。所以这个界面可以统一的管理，我们所打的所有的断点也非常的方便。


当然了其实断点调试还有其他的一些快捷键，还有一些其他的管理的功能，那么我就不挨个给大家介绍了，那么你首先把现在我所讲的这些个快捷键把它用熟了，然后其他的功能你慢慢去摸索，或者是你百度一下搜一搜，其实有很多这样的文章，你可以参考一下。


好，这是服务端的端点调试，那么客户端的端点调试其实就是调试GS，那么和差不多，只不过打断点的位置不是在这里，然后快捷键不一样而已，那么客户端的代码是运行在浏览器上，浏览器执行的是客户端的程序，那么我们想给客户端打断点在哪打，当然首先我们得有GS我们先看一看我们的源代码，看看有没有 Js文件可以让我们去试一下，其实是有的，我之前已经把所有的静态的文件放到了stirr之下，包括GS，然后咱们首页就有一个对应的js文件，这里有一个方法就public就首页上你可以点发布一点发布调的是这个方法，当然这个方法目前只是一个就是视觉效果上的呈现，然后它的实际的服务端逻辑没有，我们假设就要看一看，跟踪一下这段代码，给你演示一下断点怎么去打怎么去用。


好我需要打开浏览器在浏览器上去调，那么对于谷歌浏览器而言，你可以右键检查，然后打开了它的调试工具， Alex这里来说主要是调试页面html以及那样式的，主要是前端的工程师去用功能，控制台可以看到一些js输出的结果，然后 SARS可以看就是我们客户端的所执行的代码，那么当前我们执行的是index，首页首页它依赖了 index的GS比如说我就在这儿我要调 public发布这个方法，我在这可以打个断点，也是点一下，这就是断点。


好，我给你演示一下，比如说我点我要发布，然后比如说我输入了一些内容，当然目前都是假的，然后点发布就调到这来了，你看就卡到这来了。然后它这个插件也是点这么几个按钮，然后实现就是一个调试的功能。


然后我直接说快捷键，因为这个按钮不好记，首先如果说你想线下执行一行，那就f10f10线下执行一行，然后比如说你想进入到某一个方法内部，那么就是f11，它是进入是f11，当然我 GS太简短了，它就不太方便 f11，而且你一进到了几块的底层的代码里，它这个代码还是经过压缩的，然后只有一行就很长，所以基本上就没法调了，所以基本上我们调GS进入到开发就底层的第三方的工具，内部去调的情况比较少，所以f11用的比较少。


然后如果你想说我调到这，我就想执行到下一个端点之处，或者是让程序执行到底，那你就按这个f8， f8是执行到底。


总之客户端调试和服务端调试逻辑是一样的，它的快捷键你记住向下一步f10进入f11，然后执行到底是f8，然后前端的调试它的断点的管理，就在这个界面上。这break points这里头它就列出来了，有两个断点你可以把勾去掉，让它暂时不可用，或者你可以点点中它把它delete，这个还不能点右键remove右键remove把它删了。


当然了，如果说你想看变量的值，我这里还没有变量，比较遗憾，再来一遍点发布。


那么如果你想看这个变量值的话，应该是我这里没有变量，应该是在这个位置，或者是你勾选上，比如说我想看这个值倒了括号，就是几块语法，选中了某一个节点，我想看到它的值，你可以选中它，然后右键 Add selected text to watch。


那么它就把你选中的数据在这个位置展现它的值在这里给你展现，你这里可以点开看它里面是什么值，当然这是js对象。几块对象这里我就不细讲了，这前端的内容。


好，我执行到底 F8。


好了，总之就是说你学会断点调试以后，当这个服务端或者是客户端遇到了问题，你不知道问题的所在，你就跟踪一下看到哪一块他出的错，或者到哪一块他走的地方不对了，不是你所预期的，你去重点看一看那个地方到底有什么问题再去仔细的看。


那么其实我们在使用断点调试之前，其实还最好还要做一件事，你程序出错了，你最好看一下日志，看一看有没有报错信息，往往报错信息它很直观，能够反映出就是说你报错的位置在哪里，然后大概报的是什么错，其实可以分析出来。如果你一开始学编程，你说我不会看这个错误信息，你可以把日志截出来，百度搜一下，可能别人也遇到这个问题，那么他会有一个反馈，有一个借鉴给你，那也是比较快的。


所以说其实我们看日志其实要优先于断点调试，但是它比断点调试要麻烦，所以说我把它放到后面来讲，那么咱们用的框架是spring boot，然后 spring boot它内置了它支持各种各样的记录日志的工具，然后它内置的内置默认启用的记录日志的工具叫look back。这个是它的 look back的官网，好，我们这节课就介绍一下 look back日志工具我们怎么去用，然后我们利用这个工具尝试打一些日志在控制台或者是在文件里看一看，然后以后的话你程序一旦出错，就多看一看日志，基本上能够发现很多问题。


好，我就看一下这个网址，我已经打提前打开了，这个是这样一个界面，然后那么我们想去看他的文档，你就点 documentation，好，然后点手册点进去以后，他这里有张的选择默认是第一张，然后你就第二张第三章等等，那么我们先看一下第二章有关键的内容需要我们去看一下，在这那么记录日志其实是一个很简单的工具，它就有一个日记录日志的组件，然后的话能够记录各种级别的日志。


么log back里记日志的组件是log这个接口，然后它有几个方法，打印日志的方法， trace打印一条消息，debug打印一条消息。In，for one era。然后这些方法其实它的作用是类似的，就是打印一些日志信息，你要把一个字符串传给他，他帮你打印出来，然后不同的方法名代表不同的日志级别，跟踪级别、调试级别，这是普通级别，警告级别，严重级别或者错误级别。


也就是说这几个方法它的严重性是越来越高了，或者说它的级别是越来越高了，这有什么用呢？


那么我们可以在配置文件里启用某个级别，比如说我启用infer级，可能你程序当中每一种级别的日志都有，但我配置文件里启用了infer级以后，那么只有in for one error会打印出来debug和确实会被忽视，明白这个意思吧？


就是说我启用infer级别的日志以后，那么infer级以及infer更高的级别的日志会被显示，低级别的日志就不要了，这就有一个好处，就是我们在开发的时候可以打印各种级别的日志，然后它都能出来，我们都能看到我们看到信息比较多，这样便于我们调试程序，然后我们上线以后，因为你把日志输出到文件里比较耗性能，那么上线以后一些无关紧要的日志就不需要了，像锤子第八位甚至音法可能就不需要了，可能我们只需要一些记录一些警告，甚至是错误的消息就可以了。


所以说按照级别记日志，然后我们去动态的指定启用的级别，这是我们技术的一个关键。那么说了这么多，咱们还是去写点代码，写几个日志，打印几个日志看一下，一看就明白了。好我就回到我的程序里， GS我先不用了，不用的类我先关掉，这个也关了，然后我现在要打日志，我就写一个测试类，我在测试程序中去记日志，然后这个服务也先不用了，把它关掉让窗口大一点。


好那么我我新建一个测试类，这个类我取名就叫做 log test，然后类和其他的类也是一样，把那几个注解引入进来，我copy一下好。


那么要记日志，首先我们需要实例化记录日志的组件， logo接口，好把它放大一下，我们就自己实例化就可以了，然后每一个类我们记录日志都单独为类实例化一个 logo，不同的用不同的logo，然后为了便于所有的方法去调用，通常我们把它设置为静态的，这样的话哪个地方都能用，然后 final不可改变，然后它的接口名叫老葛，你注意这个包它有很多包下都有这个接口，那么我们选的是 org点slf号接，然后变量名我就叫log。


那么室内化logo有一个工厂是 logo自带的叫logo，factor包下的，我们先做了包下来，然后点get log，然后我们传入一个类，这个类其实就是 logo的名字，你传入一个类，这个类名就是 logo的名字，那么通常我们都会以当前的类传进去作为它的名字，这样的话以不同的logo在不同的类项它就有一个区别。


那么打印到日志上，我们也能知道 logo是属于哪个地方的logo。


好，那么有了 logo工具以后，我就测一下怎么利用它来记日志，我需要写一个测试方法，方法名我叫test log，然后这样我先在控台直接输出 log的名字。我们看一下logo点get name就是它的名字，这个只是看名字，这不是记日志，然后我就要用 Logo记日志了。


Log点debug当然比debug级别低的，还有一个确实跟踪机，基本上我们不会用它级别太低了，没必要，我们一般用的最低的级别就是debug，我们开发的过程中 debug有效，上线以后debug就取消，就是这样的。


然后那里边传个字符串随便写 debug log，好再来log点，Info，普通级别的日志 Info， log点word，警告级别，log最后log点l错误级别 l那么打印完资质以后，我们还需要在配图片里声明一下，我要启用什么级别的日志，这样的话 log back才知道我应该给你打印什么样的信息。


 Look back其实它有自己的配置文件，但是经过死人不得的整合以后，我们也可以在 application practice里去配，这样我就在application practice里去配一下，这样比较方便。


打开配置文件，其实我之前已经配过了，你看咱们之前不是为了显示 circle，所以说我把整个我们的包下的代码的级别都指定为了debug，也就是说debug级别以上的日志都会打印出来。


好，我就不用改了，就这样。 Log in点level其实就指的是日志的级别，后面跟着的包表示说这个包下的级别是怎么样的。好，那么我就回到测试方法当中执行一下是吧？好。我们看一下打印的结果，首先你看 log name，其实就是一个类名对吧？因为你传的就是类名，它是以类的名字，logo的名字，然后你看日志的信息，那么debug也输出了，因数也有了，望也有了，艾瑞也有了，就4个级别都有了，因为它们都大于等于debug级别，它的格式是这样的。


好，我改一下，比如说我把 debug改成我然后我再去执行这个测试方法，你看这回就只打印了两个日志，一个是one，一个是l对吧？就是用起来非常简单，那么以后我们在写代码的时候怎么去做？


其实我们写程序的时候比较常用的这三个级别，一个是air，比如说我们踹到踹开始捕获到了一个异常以后，你肯定是要记录一个错误级别的日志，无可置疑的对吧？


然后比如说以后我们可能会比如说启用一些线程池，启用一些定时任务，处理一些特殊的任务，这个时候可能我担心任务执行的过程中会有问题，我可能会打一个普通级别的日志，就是正常的记录一下，这个也有用。


然后平时我们在开发的过程中，比如这个只是我暂时调试程序要用以后就不需要了，你就debug所以基本上平时我们用的就是debug Info，l one用的也相对来说少一点。


当前我是把日志打印到控制台，默认它就是打印到控制台，那么如果我们系统上线以后打印到控制台就没有意义了，因为你的软件最终是部署在服务器上，服务器的话，它就不会安装开发工具idea，他直接就安装一个应用服务器，你就没有控制台，所以说而且打印的控制台它最终不会留存下来，只要你应用程序一关闭就没了，所以说为了能够长久地保存这些日的消息，便于我们日后的一个追踪，甚至是对日志的一个分析，我们经常也需要把日志存到一个指定的文件里，下面给大家演示一下我们怎么把日志打到这个文件里，那么简单的方式就是我们还是在 practice里加以声明，这样我把它改成第八个，然后多一点，这样我们打印到文件里，我好看得直观一点。


好，我们可以做这样一个声明，不是 log in点 five，等于那意思是说我日志的文件要存到哪里，后面就跟一个路径跟一个文件名就可以了。比如说我要把它存到这个地盘，然后 work的下面，然后我希望在work之下新建一个名为data的目录，在data下新建一个名为now coder的目录，然后在这里面创建一个community点log，把日志打印到这个文件里，通常的日志文件都以log结尾。


好，你看我现在 d盘应该是没有 work，没有好我就再执行一下这个测试方法，执行完以后控制台也会打印出这个消息，空还是一直都打的。


我们再看一下 d盘work就多了一个目录，data刚刚创建的，你看这个时间刚刚创建的，然后对着下面然后扣点，然后到下游肯定对 log，然后你把它打开。这就是刚刚记录的一些日志的消息，包括第八个in for more air都有，然后程序执行完以后，他就把程序关掉了，就是杀听到对吧？是整个一个程序执行的过程都能看得出来。


好，那么这种机制制的方式感应到文件中的方式比较简单，其实我们在实际的应用当中还会比这个做得更复杂一点，日志很重要，你这样简单的打到一个log文件里，这个文件可能会非常的大，而且文件里会混杂着各种级别的日志，其实不方便我们将来去做分析的。


我们在实际的开发的时候，往往是把日志按照不同的级别存到不同的文件里， infer就存到infer的文件里，one就存在one的文件里，l就存在l的文件里，那这样比如说我只想分析错误，我就看l的log，然后我只想看那些调度相关的信息，我就看Info的log，以此类推，这样会更合理一点，而且最好是这个文件不一直往一个文件里存，当这个文件比如说达到5兆以后，我们让他再拆分出一个另外一个文件，就5兆以后就再分一个文件，5兆以后就再分一个文件，总之我们实际开发的时候会更复杂一点，我给大家演示一下怎么办？


那么通过 application practice就不方便做这样的配置，因为这样你想达到这样的效果，配置会非常的复杂，这样我把注掉这两种方式演示一下就完了，我们就暂时先不用了，那么如果你想达到刚才我所说的那种效果怎么办？


我们需要写一个log back所对应的 xml文件，这个文件在look back官网上每一张它有一个讲解配置的一张，第三张，讲解配置的一张你可以看，那么课上我就不给大家去看了，因为比较长，而且这个文件我们即便是看去手写也非常的麻烦，我提前已经写好一份就是我们平时用的东西，然后的话我把这个东西拿过来，引用到我们项目中来，我给大家讲解一遍，你能明白其中的意思，然后会改就可以了，这些东西不用把它背下来。


好，那么我先找到我提前准备好的文件，好像在这儿了，那么这个文件一般 springboard的建议叫lucke，bak杠是bring的xml，只要你取这个名字，并且把这个文件是放到了resource根路径下，就把它放到resource之下，那么sprint就自动的能够启用这个文件里的配置，你就不用说声明说我要使用这个文件，它自动就会发现，但是如果你取别的名字它就发现不了，他就认为不存在。


所以你要注意好，我们打开 loc的xml，咱们看一下，好，你看这个文件一开始是声明了contact name其实就是项目的应用名，这里叫community不用改，我们这个项目就叫community对吧？然后有两个属性，其实有两个变量，然后一个是log pass，就日志文件存放的目录，我这里原来写的是c盘，我把它改成d盘，然后你拿到这个文件以后，根据自己的情况去改，我就放到d盘work data之下，然后这个是appdirapp的目录，我叫community，就是说我希望把日志文件放到目录下，然后再建一个这级目录放到这个目录下，因为什么？


我们可能一个服务器上会部署，有可能会部署多个项目，那么这个目录下可能会放community，它可能会放其他的项目的日志，那么通过项目里面加以区分比较合理。


然后后面的话， air file就是说配置我什么样的日志要存到 air file里，什么样的日要存到 one file里，什么样的日要存到iPhone file里，其实如果你了解一块，埃尔菲其他的恋爱环境都了解了，因为他们的配置方式都一样，就是级别不同而已。


好，首先你看这个地方配的是具体的日志文件哪，应该是在目录下，apptir下就这个目录加上它，然后文件名叫log l点，log只是这个文件名。


然后后面还有一个叫rolling就是滚动的策略，就是说如果你这个文件存到了一定程度，比如说5兆存不下了，或者说我希望你在再建一个新的文件来存，建新的文件的策略是什么？


然后这里写了你看file pass pattern，创建新文件出在哪里也是log pass appdir然后新建一个l文件夹，文件夹下的文件叫log error百分号d然后 yy杠杠DD， yy杠mm杠DD其实它是一个日期的格式，百分号d是一个日期，这是一个日期的格式年月日，然后在后面百分2I是一个变量0123，所以最终的话拆分出来的日志的文件，它是这样的一个这样一个名字 log error，然后年月日，然后一个序列号，然后点log，然后这里写了最大的文件大小是5兆，也就是说那一个文件存到了5兆存不下了怎么办？


再建一个新的序号再累加一下。


然后 max history就最长存多长时间？30天，当超过30天以后，那么把超过的那些个历史的数据就清了，不会一直存着，因为服务器的存储空间有限，没有必要永久的存那么多的文件，判的等于处，意思我是以追加的形式存，日志不是覆盖是追加，这是合理的，然后这个是日志的一个格式，其实就是我们控台看到的日志输出的格式，然后百分号d是日期，level就是日级别，spread是哪个线程在执行 Logo日志的一个所处的，它是在哪个类中去执行的？


去打了日志，然后后面是哪个具体来说哪个文件多少行，还有详细的提示消息，详细的内容，后面的换行大概是这个意思。


然后字数集有点支持中文这个是一个过滤器，就是说什么样的日志会被我组件去处理？他说 era级别的日志，那么on，match如果匹配到了era级别的日志，我就允许去记录，如果miss match就不匹配，我就带你拒绝就不记录。就总而言之组件只会筛选出l级别的日加以记录，然后记录到默认是这个文件里，如果存不下就拆分到这样的文件里，是这么一种感觉。


同理 Oneself就存到了乱word这样的文件里， Info就存到了 log in for这样的文件里，以此类推，然后还有一个与众不同的是看守，这个比较简短，就是说它是把日志打印到控制台，便于我们平时调试，方便打印到控制台格式是这样的，其实跟上面一样，编码是这样的，然后控制台允许打印第八个级别的日志，往上比较简单，后面还有我单独声明说，我们肯定得包下的日级别为第八个这卡夫卡我们还没有讲到就先去掉。


然后后面还有一个声明 root，表示我们整个项目所有的包的根目录，默认的级别是音符，然后因为什么？我们根目录包含其实包含所有的炸包里面的类，那么你这个地方不能debug，否则日剧太多了，所以说最低级别是英法，然后这里边又启用了引用了刚才的那几个组件， Fire arrow就是组件叫fire arrow，赢的是他，比方说我要启用这个fire组件，记录air级别日志，我要启用万组件记录万级别日志，我要启用一份组件记录一份级别日志，我要请组件在控制台打印日志，就这个意思。


好了，总之这个文件就是配好了，你就拿来用就可以了。然后基本上需要改动的地方，头上的路径，如果你开发项目的时候，这个包名跟我不一样，你包名也要改一改，其他的地方基本上就不用动，这个格式也是比较合理的。然后还有这个文件的大小5兆，如果你觉得不合适你也可以改，但其实也是没有必要的，这样就可以了。好，那么现在这个文件已经有了，下面我再执行这个测试类，我们看一看那个文件会不会有效。


好，我执行一下这个测试方法，首先看控制台，你看这回打印的日志，原来没有这个文件之前有点区别，它变得更简短了，因为我在配置文件里对日的格式进行了重新的配置，它和默认的方式不一样，变得更简短一些，更直观一些。


然后我们看一下 d盘work data，community你看就多了三个文件，分别是infer l然后没有问题，有人可能会想你怎么没有 log in for，不是第八个级别的日志。因为我们配置文件里不是只起只是声明了，我要在文件里存l1以及 Info级别的日志。第八个级别的日志我不在文件里存，我是打印到控制台了，这个表示控制台，所以控制台能看到第八个级别的日志，对吧？


所以这个逻辑是没有问题的，调试的时候再过来看第八个，然后上线以后这三个级别的日志就都有了，好，这样的话我就把项目相关的调试技巧给大家介绍到位了，至于说怎么运用比较舒服比较方便，另外的话运用的时候那种感觉怎么能找到，这需要你在开发的过程中不断的练，才能慢慢的去锻炼出这种感觉和这种能力好。


我再大概的回顾一下我们这次课的内容，就是当你在开发这个程序的时候，如果你发现有问题，首先应该怎么办？首先你要看一下状态码，大概的定位一下说是我客户端程序有问题，还是我服务端程序有问题，我看这个状态码能看得出来。当然有人说我状态码上哪看呢？如果报错的话，这个页面上就会显示出来404 500就在这就能看到。


其实不用到哪个地方特殊去看，就在页面上就有，然后的话判定了状态码大概给我提示的是客户端还是服务端有问题以后，我再去或者是有通过断点去跟踪或者是看一看日志，当然能看日志，找到问题就看日志，如果看日志还搞不定，跟踪一下，跟踪到位了，应该是可以搞得定的好。了，那么这次课我们就先讲到这，咱们下次课再见。